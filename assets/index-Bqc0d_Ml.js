import{r as l,a as sa,u as vs,b as aa,d as ra,R as Nt,e as J,N as js,H as oa}from"./vendor-DGWPQq22.js";import{c as na}from"./supabase-BE2meY56.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const x of n)if(x.type==="childList")for(const v of x.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&o(v)}).observe(document,{childList:!0,subtree:!0});function a(n){const x={};return n.integrity&&(x.integrity=n.integrity),n.referrerPolicy&&(x.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?x.credentials="include":n.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(n){if(n.ep)return;n.ep=!0;const x=a(n);fetch(n.href,x)}})();var ws={exports:{}},et={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=l,ia=Symbol.for("react.element"),ca=Symbol.for("react.fragment"),da=Object.prototype.hasOwnProperty,ma=la.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ua={key:!0,ref:!0,__self:!0,__source:!0};function Ns(t,s,a){var o,n={},x=null,v=null;a!==void 0&&(x=""+a),s.key!==void 0&&(x=""+s.key),s.ref!==void 0&&(v=s.ref);for(o in s)da.call(s,o)&&!ua.hasOwnProperty(o)&&(n[o]=s[o]);if(t&&t.defaultProps)for(o in s=t.defaultProps,s)n[o]===void 0&&(n[o]=s[o]);return{$$typeof:ia,type:t,key:x,ref:v,props:n,_owner:ma.current}}et.Fragment=ca;et.jsx=Ns;et.jsxs=Ns;ws.exports=et;var e=ws.exports,_s,rs=sa;_s=rs.createRoot,rs.hydrateRoot;const os="lovely_session_id",he=()=>{let t=localStorage.getItem(os);return t||(t=`session_${Date.now()}_${Math.random().toString(36).substring(2)}`,localStorage.setItem(os,t)),t},xa="https://wvqlnlcszlgmqboyhavt.supabase.co",ha="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind2cWxubGNzemxnbXFib3loYXZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1NDAxMDgsImV4cCI6MjA3NTExNjEwOH0.czlU3pKqtgbjj_tOIRmdBsmTO-derqYtbgmhzNYVdv0",k=na(xa,ha,{global:{headers:{"x-session-id":he()}}}),Ze="lovely-sex-day",tt=async(t,s)=>{const a=t.name.split(".").pop(),o=`${Math.random().toString(36).substring(2)}.${a}`,n=`${s}/${o}`,{error:x}=await k.storage.from(Ze).upload(n,t);if(x)throw x;const{data:v}=k.storage.from(Ze).getPublicUrl(n);return v.publicUrl},Je=async t=>{const s=t.split(`${Ze}/`)[1];if(!s)return;const{error:a}=await k.storage.from(Ze).remove([s]);if(a)throw a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ga={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),O=(t,s)=>{const a=l.forwardRef(({color:o="currentColor",size:n=24,strokeWidth:x=2,absoluteStrokeWidth:v,className:_="",children:y,...f},c)=>l.createElement("svg",{ref:c,...ga,width:n,height:n,stroke:o,strokeWidth:v?Number(x)*24/Number(n):x,className:["lucide",`lucide-${pa(t)}`,_].join(" "),...f},[...s.map(([b,E])=>l.createElement(b,E)),...Array.isArray(y)?y:[y]]));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=O("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=O("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=O("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=O("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=O("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=O("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=O("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=O("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=O("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=O("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=O("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=O("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=O("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=O("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=O("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=O("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=O("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=O("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=O("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=O("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=O("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=O("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=O("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=O("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=O("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=O("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=O("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=O("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=O("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=O("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=O("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=O("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=O("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=O("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=O("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Is="lovely_cart",Le=()=>{const t=localStorage.getItem(Is);return t?JSON.parse(t):[]},rt=t=>{localStorage.setItem(Is,JSON.stringify(t))},It=(t,s)=>{const a=Le(),o=a.find(n=>n.product.id===t.id);o?o.quantity+=1:a.push({product:t,quantity:1,promotion:s}),rt(a),window.dispatchEvent(new CustomEvent("cart-updated"))},Ds=t=>{const a=Le().filter(o=>o.product.id!==t);rt(a),window.dispatchEvent(new CustomEvent("cart-updated"))},is=(t,s)=>{const a=Le(),o=a.find(n=>n.product.id===t);o&&(s<=0?Ds(t):(o.quantity=s,rt(a),window.dispatchEvent(new CustomEvent("cart-updated"))))},Ca=()=>{rt([]),window.dispatchEvent(new CustomEvent("cart-updated"))},cs=t=>t.reduce((s,a)=>{const o=a.promotion?.discount_price||a.product.price;return s+o*a.quantity},0),Aa=()=>Le().reduce((s,a)=>s+a.quantity,0),Rs=({isOpen:t,onClose:s,children:a,title:o,maxWidth:n="md"})=>{if(l.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const x={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overlay animate-fade-in",onClick:s}),e.jsx("div",{className:"modal animate-fade-in",children:e.jsxs("div",{className:`modal-content animate-scale-in ${x[n]} w-full`,children:[o&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200",children:[e.jsx("h3",{className:"text-xl font-display font-semibold text-neutral-900",children:o}),e.jsx("button",{onClick:s,className:"btn-icon","aria-label":"Close",children:e.jsx(ne,{className:"w-5 h-5"})})]}),!o&&e.jsx("button",{onClick:s,className:"absolute top-4 right-4 btn-icon z-10 text-black","aria-label":"Close",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsx("div",{className:"overflow-y-auto flex-1",children:a})]})})]})},St=({children:t,variant:s="primary",size:a="md",fullWidth:o=!1,className:n="",...x})=>{const v={primary:"btn-primary",secondary:"btn-secondary",outline:"btn-outline",ghost:"btn-ghost"},_={sm:"px-6 py-3 text-sm",md:"px-8 py-4 text-base",lg:"px-10 py-5 text-lg"};return e.jsx("button",{className:`${v[s]} ${_[a]} ${o?"w-full":""} ${n}`,...x,children:t})},Ta=({isOpen:t,onClose:s})=>{const[a,o]=l.useState([]),[n,x]=l.useState(!1);l.useEffect(()=>{t&&v()},[t]);const v=async()=>{x(!0);const f=he(),{data:c}=await k.from("favorites").select("id, product_id").eq("session_id",f);if(c&&c.length>0){const b=c.map(j=>j.product_id),{data:E}=await k.from("products").select("*").in("id",b),{data:g}=await k.from("promotions").select("*").in("product_id",b).eq("is_active",!0),u=c.map(j=>{const R=E?.find(w=>w.id===j.product_id),D=g?.find(w=>w.product_id===j.product_id);return{id:j.id,product:R,promotion:D}}).filter(j=>j.product);o(u)}else o([]);x(!1)},_=async f=>{await k.from("favorites").delete().eq("id",f),v()},y=f=>{It(f.product,f.promotion)};return e.jsx(Rs,{isOpen:t,onClose:s,title:"Meus Favoritos",maxWidth:"lg",children:e.jsx("div",{className:"p-6",children:n?e.jsx("div",{className:"text-center py-8 text-neutral-500",children:"Carregando..."}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-neutral-500 mb-4",children:"Nenhum produto favoritado ainda"}),e.jsx(St,{onClick:s,children:"Explorar Produtos"})]}):e.jsx("div",{className:"space-y-4",children:a.map(f=>{const c=f.promotion&&new Date(f.promotion.starts_at)<=new Date&&(!f.promotion.ends_at||new Date(f.promotion.ends_at)>=new Date),b=c?f.promotion.discount_price:f.product.price;return e.jsxs("div",{className:"flex gap-4 p-5 bg-neutral-50 rounded-2xl hover:bg-neutral-100 hover:shadow-lg transition-all duration-500 transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0 bg-white rounded-2xl overflow-hidden shadow-md",children:f.product.image_url?e.jsx("img",{src:f.product.image_url,alt:f.product.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-400 text-xs",children:"No Image"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-neutral-900 line-clamp-1 mb-1",children:f.product.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c&&e.jsxs("span",{className:"text-sm text-neutral-400 line-through",children:["R$ ",f.product.price.toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-black",children:["R$ ",b.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>y(f),className:"p-2 rounded-full bg-black text-white hover:bg-gray-800 transition-all duration-300 transform hover:scale-110 shadow-md","aria-label":"Add to cart",children:e.jsx(st,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(f.id),className:"p-2 rounded-full bg-neutral-200 text-neutral-700 hover:bg-rose hover:text-white transition-all duration-300 transform hover:scale-110 shadow-sm","aria-label":"Remove from favorites",children:e.jsx(ge,{className:"w-4 h-4"})})]})]},f.id)})})})})},Pa=({isOpen:t,onClose:s})=>{const[a,o]=l.useState([]),[n,x]=l.useState("");l.useEffect(()=>{t&&(v(),_());const c=()=>{t&&v()};return window.addEventListener("cart-updated",c),()=>window.removeEventListener("cart-updated",c)},[t]);const v=()=>{o(Le())},_=async()=>{const{data:c}=await k.from("site_settings").select("whatsapp_number").maybeSingle();c?.whatsapp_number&&x(c.whatsapp_number)},y=()=>{if(!n){alert("WhatsApp não configurado");return}let c=`Olá! Gostaria de fazer um pedido:

`;a.forEach(g=>{const u=g.promotion?.discount_price||g.product.price;c+=`• ${g.product.name}
`,c+=`  Quantidade: ${g.quantity}
`,c+=`  Preço: R$ ${(u*g.quantity).toFixed(2)}

`}),c+=`*Total: R$ ${cs(a).toFixed(2)}*`;const b=encodeURIComponent(c),E=`https://wa.me/${n.replace(/\D/g,"")}?text=${b}`;window.open(E,"_blank"),Ca(),s()},f=cs(a);return e.jsx(Rs,{isOpen:t,onClose:s,title:"Meu Carrinho",maxWidth:"lg",children:e.jsx("div",{className:"p-6",children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-neutral-500 mb-4",children:"Seu carrinho está vazio"}),e.jsx(St,{onClick:s,children:"Explorar Produtos"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:a.map(c=>{const b=c.promotion?.discount_price||c.product.price,E=!!c.promotion;return e.jsxs("div",{className:"flex gap-4 p-5 bg-neutral-50 rounded-2xl hover:shadow-lg transition-all duration-500",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0 bg-white rounded-2xl overflow-hidden shadow-md",children:c.product.image_url?e.jsx("img",{src:c.product.image_url,alt:c.product.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-400 text-xs",children:"No Image"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-neutral-900 line-clamp-2 mb-1",children:c.product.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[E&&e.jsxs("span",{className:"text-sm text-neutral-400 line-through",children:["R$ ",c.product.price.toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-black",children:["R$ ",b.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-full border border-neutral-200 shadow-sm",children:[e.jsx("button",{onClick:()=>is(c.product.id,c.quantity-1),className:"p-2 hover:bg-neutral-100 rounded-l-full transition-all duration-300 transform hover:scale-110 text-black","aria-label":"Decrease quantity",children:e.jsx(ka,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-semibold min-w-[2rem] text-center text-black",children:c.quantity}),e.jsx("button",{onClick:()=>is(c.product.id,c.quantity+1),className:"p-2 hover:bg-neutral-100 rounded-r-full transition-all duration-300 transform hover:scale-110 text-black","aria-label":"Increase quantity",children:e.jsx(_e,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:()=>Ds(c.product.id),className:"p-2 rounded-full bg-neutral-200 text-neutral-700 hover:bg-rose hover:text-white transition-all duration-300 transform hover:scale-110 shadow-sm","aria-label":"Remove from cart",children:e.jsx(ge,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Subtotal"}),e.jsxs("p",{className:"text-lg font-bold text-neutral-900",children:["R$ ",(b*c.quantity).toFixed(2)]})]})]},c.product.id)})}),e.jsxs("div",{className:"border-t border-neutral-200 pt-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-neutral-700",children:"Subtotal"}),e.jsxs("span",{className:"text-lg font-semibold text-black",children:["R$ ",f.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-display font-bold text-neutral-900",children:"Total"}),e.jsxs("span",{className:"text-2xl font-display font-bold text-black",children:["R$ ",f.toFixed(2)]})]})]}),e.jsxs(St,{onClick:y,variant:"secondary",fullWidth:!0,size:"lg",children:[e.jsx(Cs,{className:"w-5 h-5"}),"Finalizar pelo WhatsApp"]})]})})})},Et=l.forwardRef(({label:t,error:s,className:a="",...o},n)=>e.jsxs("div",{className:"w-full",children:[t&&e.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:t}),e.jsx("input",{ref:n,className:`input-field ${s?"border-rose":""} ${a}`,...o}),s&&e.jsx("p",{className:"mt-1 text-sm text-rose",children:s})]}));Et.displayName="Input";const Ia=()=>{const[t,s]=l.useState(null),[a,o]=l.useState(0),[n,x]=l.useState(0),[v,_]=l.useState(!1),[y,f]=l.useState(!1),[c,b]=l.useState(!1),[E,g]=l.useState(!1),[u,j]=l.useState("");l.useEffect(()=>{R(),D(),w();const N=()=>D(),M=()=>w();window.addEventListener("cart-updated",N),window.addEventListener("favorites-updated",M);const T=()=>{g(window.scrollY>50)};return window.addEventListener("scroll",T),()=>{window.removeEventListener("cart-updated",N),window.removeEventListener("favorites-updated",M),window.removeEventListener("scroll",T)}},[]);const R=async()=>{const{data:N}=await k.from("site_settings").select("*").maybeSingle();N&&s(N)},D=()=>{o(Aa())},w=async()=>{const N=he(),{count:M}=await k.from("favorites").select("*",{count:"exact",head:!0}).eq("session_id",N);x(M||0)},S=N=>{N.preventDefault(),u.trim()&&(window.location.href=`#/products?search=${encodeURIComponent(u.trim())}`)};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:`fixed top-0 left-0 right-0 z-30 transition-all duration-500 ${E?"bg-black/95 backdrop-blur-md border-b border-neutral-800":"bg-black border-b border-transparent"}`,children:e.jsxs("div",{className:"container-custom",children:[e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("a",{href:"#/",className:"flex items-center gap-3 group",children:t?.logo_url?e.jsx("img",{src:t.logo_url,alt:t.site_name,className:"h-12 w-auto object-contain"}):e.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-white group-hover:text-gold transition-colors duration-300",translate:"no",children:t?.site_name||"Lovely Sex Day"})}),e.jsxs("div",{className:"hidden lg:flex items-center gap-8",children:[e.jsx("a",{href:"#/",className:"text-neutral-300 hover:text-gold transition-colors duration-300 font-medium tracking-wide text-sm uppercase",children:"Início"}),e.jsx("a",{href:"#/products",className:"text-neutral-300 hover:text-gold transition-colors duration-300 font-medium tracking-wide text-sm uppercase",children:"Produtos"}),e.jsx("a",{href:"#/promotions",className:"text-neutral-300 hover:text-gold transition-colors duration-300 font-medium tracking-wide text-sm uppercase",children:"Promoções"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsx("div",{className:"hidden md:flex items-center justify-center px-8 lg:px-16",children:e.jsxs("form",{onSubmit:S,className:"w-full max-w-xs relative",children:[e.jsx(Et,{type:"text",placeholder:"Pesquisar...",className:"bg-neutral-800 border-neutral-700 text-white placeholder-neutral-400 rounded-full py-2 pl-10 pr-4 w-full focus:ring-gold focus:border-gold",value:u,onChange:N=>j(N.target.value)}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-gold",children:e.jsx(Qe,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>_(!0),className:"relative p-3 text-neutral-300 hover:text-magenta transition-all duration-500 group rounded-2xl hover:bg-neutral-900/50 backdrop-blur-sm","aria-label":"Favorites",children:[e.jsx(Pt,{className:"w-6 h-6 group-hover:scale-125 transition-transform duration-500 group-hover:drop-shadow-lg"}),n>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-magenta text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-scale-in",children:n})]}),e.jsxs("button",{onClick:()=>f(!0),className:"relative p-3 text-neutral-300 hover:text-wine transition-all duration-500 group rounded-2xl hover:bg-neutral-900/50 backdrop-blur-sm","aria-label":"Cart",children:[e.jsx(st,{className:"w-6 h-6 group-hover:scale-125 transition-transform duration-500 group-hover:drop-shadow-lg"}),a>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-white text-wine text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-scale-in",children:a})]}),e.jsx("button",{onClick:()=>b(!c),className:"lg:hidden p-3 text-neutral-300 hover:text-gold transition-all duration-500 rounded-2xl hover:bg-neutral-900/50 backdrop-blur-sm transform hover:scale-110","aria-label":"Menu",children:c?e.jsx(ne,{className:"w-6 h-6"}):e.jsx(_a,{className:"w-6 h-6"})})]})]})]}),c&&e.jsx("div",{className:"lg:hidden pb-6 border-t border-neutral-800 mt-2 pt-6 animate-slide-up",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("form",{onSubmit:S,className:"w-full relative mb-4",children:[e.jsx(Et,{type:"text",placeholder:"Pesquisar produtos...",className:"bg-neutral-800 border-neutral-700 text-white placeholder-neutral-400 rounded-full py-2 pl-10 pr-4 w-full focus:ring-gold focus:border-gold",value:u,onChange:N=>j(N.target.value)}),e.jsx("button",{type:"submit",className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-gold",children:e.jsx(Qe,{className:"w-5 h-5"})})]}),e.jsx("a",{href:"#/",onClick:()=>b(!1),className:"text-neutral-300 hover:text-gold transition-colors duration-300 font-medium tracking-wide text-sm uppercase py-2",children:"Início"}),e.jsx("a",{href:"#/products",onClick:()=>b(!1),className:"text-neutral-300 hover:text-gold transition-colors duration-300 font-medium tracking-wide text-sm uppercase py-2",children:"Produtos"}),e.jsx("a",{href:"#/promotions",onClick:()=>b(!1),className:"text-neutral-300 hover:text-gold transition-colors duration-300 font-medium tracking-wide text-sm uppercase py-2",children:"Promoções"})]})})]})}),e.jsx("div",{className:"h-20"}),e.jsx(Ta,{isOpen:v,onClose:()=>{_(!1),w()}}),e.jsx(Pa,{isOpen:y,onClose:()=>f(!1)})]})},Da=()=>{const[t,s]=l.useState(null);l.useEffect(()=>{a()},[]);const a=async()=>{const{data:o}=await k.from("site_settings").select("*").maybeSingle();o&&s(o)};return new Date().getFullYear(),e.jsx("footer",{className:"bg-black-dark border-t border-neutral-800 text-white mt-24",children:e.jsx("div",{className:"container-custom py-16",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 mb-12",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-3xl font-bold mb-4 text-gold",translate:"no",children:t?.site_name||"Lovely Sex Day"}),e.jsx("p",{className:"text-neutral-400 mb-6 leading-relaxed font-light",children:"Sua loja especializada em produtos íntimos de qualidade. Discrição, elegância e satisfação garantidas."}),e.jsxs("div",{className:"flex gap-3",children:[t?.instagram&&e.jsx("a",{href:`https://instagram.com/${t.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-black-light border border-neutral-800 hover:border-magenta hover:text-magenta transition-all duration-300","aria-label":"Instagram",children:e.jsx(wa,{className:"w-5 h-5"})}),t?.facebook&&e.jsx("a",{href:`https://facebook.com/${t.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-black-light border border-neutral-800 hover:border-magenta hover:text-magenta transition-all duration-300","aria-label":"Facebook",children:e.jsx(ja,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-display text-xl font-semibold mb-6 text-white flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-gold"}),"Links Úteis"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsx("li",{children:e.jsx("a",{href:"#/",className:"text-neutral-400 hover:text-gold transition-colors duration-300 tracking-wide",children:"Início"})}),e.jsx("li",{children:e.jsx("a",{href:"#/categories",className:"text-neutral-400 hover:text-gold transition-colors duration-300 tracking-wide",children:"Categorias"})}),e.jsx("li",{children:e.jsx("a",{href:"#/products",className:"text-neutral-400 hover:text-gold transition-colors duration-300 tracking-wide",children:"Produtos"})}),e.jsx("li",{children:e.jsx("a",{href:"#/promotions",className:"text-neutral-400 hover:text-gold transition-colors duration-300 tracking-wide",children:"Promoções"})})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-display text-xl font-semibold mb-6 text-white flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-gold"}),"Contato"]}),e.jsx("ul",{className:"space-y-4",children:t?.whatsapp_number&&e.jsx("li",{children:e.jsxs("a",{href:`https://wa.me/${t.whatsapp_number.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-neutral-400 hover:text-wine transition-all duration-300 group",children:[e.jsx(Cs,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-300"}),e.jsx("span",{className:"tracking-wide",children:"WhatsApp"})]})})})]})]})})})},Dt=({product:t,promotion:s,onFavoriteChange:a})=>{const[o,n]=l.useState(!1),[x,v]=l.useState(!1),[_,y]=l.useState(0),f=vs(),c=t.images&&t.images.length>0?t.images:t.image_url?[t.image_url]:[];l.useEffect(()=>{b()},[t.id]);const b=async()=>{const w=he(),{data:S}=await k.from("favorites").select("*").eq("session_id",w).eq("product_id",t.id).maybeSingle();n(!!S)},E=s&&s.is_active,g=E?t.price*(1-s.discount_percentage/100):t.price,u=E&&s.discount_percentage,j=async w=>{w.stopPropagation(),w.preventDefault(),v(!0);const S=he();try{o?(await k.from("favorites").delete().eq("session_id",S).eq("product_id",t.id),n(!1)):(await k.from("favorites").insert({session_id:S,product_id:t.id}),n(!0)),window.dispatchEvent(new Event("favorites-updated")),a?.()}catch(N){console.error("Error toggling favorite:",N)}finally{v(!1)}},R=w=>{w.stopPropagation(),w.preventDefault(),It(t,E?s:void 0)},D=()=>{f(`/product/${t.id}`)};return e.jsx("div",{onClick:D,className:"group relative cursor-pointer h-full",children:e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-neutral-900 border border-neutral-800 hover:border-gold transition-all duration-500 md:transform md:hover:-translate-y-2 h-full flex flex-col",children:[u&&e.jsxs("div",{className:"absolute top-2 right-2 md:top-3 md:right-3 z-10 px-2 py-0.5 md:px-3 md:py-1 bg-magenta text-white text-xs font-bold rounded-lg",children:["-",u,"%"]}),e.jsx("button",{onClick:j,disabled:x,className:"absolute top-2 left-2 md:top-3 md:left-3 z-10 p-1.5 md:p-2 bg-black/80 backdrop-blur-sm rounded-lg hover:bg-black transition-all duration-300 disabled:opacity-50","aria-label":o?"Remove from favorites":"Add to favorites",children:e.jsx(Pt,{className:`w-3.5 h-3.5 md:w-4 md:h-4 transition-all duration-300 ${o?"fill-magenta text-magenta":"text-white"}`})}),e.jsx("div",{className:"aspect-[3/4] overflow-hidden bg-neutral-950 relative",children:c.length>0?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:c[_],alt:t.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5 z-10",children:c.map((w,S)=>e.jsx("button",{onClick:N=>{N.stopPropagation(),N.preventDefault(),y(S)},className:`w-1.5 h-1.5 rounded-full transition-all ${S===_?"bg-gold w-4":"bg-white/50 hover:bg-white/80"}`,"aria-label":`View image ${S+1}`},S))}),e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 left-2 right-2 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:w=>{w.stopPropagation(),w.preventDefault(),y(S=>(S-1+c.length)%c.length)},className:"bg-black/50 hover:bg-black/70 text-white p-1 rounded-full backdrop-blur-sm","aria-label":"Previous image",children:"‹"}),e.jsx("button",{onClick:w=>{w.stopPropagation(),w.preventDefault(),y(S=>(S+1)%c.length)},className:"bg-black/50 hover:bg-black/70 text-white p-1 rounded-full backdrop-blur-sm","aria-label":"Next image",children:"›"})]})]})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-neutral-900",children:e.jsx("span",{className:"text-neutral-700 text-3xl md:text-5xl font-display",children:"?"})})}),e.jsxs("div",{className:"p-3 md:p-4 flex flex-col flex-grow",children:[e.jsx("h3",{className:"font-display text-sm md:text-lg text-white font-semibold mb-2 md:mb-3 line-clamp-2 flex-grow",children:t.name}),e.jsxs("div",{className:"flex items-baseline gap-1 md:gap-2 mb-2 md:mb-4",children:[E&&e.jsxs("span",{className:"text-xs md:text-sm text-neutral-500 line-through",children:["R$ ",t.price.toFixed(2)]}),e.jsxs("span",{className:"font-display text-lg md:text-2xl font-bold text-gold",children:["R$ ",g.toFixed(2)]})]}),e.jsxs("button",{onClick:R,disabled:t.stock_quantity<=0,className:"w-full py-2 md:py-3 bg-wine text-white font-semibold text-xs md:text-sm rounded-lg hover:bg-wine-light transition-all duration-300 flex items-center justify-center gap-1.5 md:gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(st,{className:"w-3.5 h-3.5 md:w-4 md:h-4"}),e.jsx("span",{className:"hidden md:inline",children:"Adicionar ao Carrinho"}),e.jsx("span",{className:"md:hidden",children:"Adicionar"})]})]})]})})},Ge=({title:t,products:s,promotions:a})=>{const o=l.useRef(null),[n,x]=l.useState(!1),[v,_]=l.useState(!1),y=()=>{if(!o.current)return;const{scrollLeft:c,scrollWidth:b,clientWidth:E}=o.current;x(c>0),_(c<b-E-10)};l.useEffect(()=>(y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)),[s]);const f=c=>{if(!o.current)return;const b=o.current.clientWidth*.8;o.current.scrollBy({left:c==="left"?-b:b,behavior:"smooth"})};return s.length===0?null:e.jsxs("section",{className:"py-12 md:py-20 bg-black",children:[e.jsxs("div",{className:"container-custom",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 md:mb-12",children:[e.jsx("h2",{className:"font-display text-2xl md:text-4xl lg:text-5xl font-bold text-white",children:t}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsx("button",{onClick:()=>f("left"),disabled:!n,className:"p-3 bg-neutral-900 border border-neutral-800 rounded-xl hover:bg-neutral-800 hover:border-gold transition-all duration-300 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-neutral-900 disabled:hover:border-neutral-800","aria-label":"Scroll left",children:e.jsx(Tt,{className:"w-5 h-5 text-white"})}),e.jsx("button",{onClick:()=>f("right"),disabled:!v,className:"p-3 bg-neutral-900 border border-neutral-800 rounded-xl hover:bg-neutral-800 hover:border-gold transition-all duration-300 disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-neutral-900 disabled:hover:border-neutral-800","aria-label":"Scroll right",children:e.jsx(ks,{className:"w-5 h-5 text-white"})})]})]}),e.jsx("div",{ref:o,onScroll:y,className:"overflow-x-auto scrollbar-hide -mx-4 px-4 md:mx-0 md:px-0",style:{scrollSnapType:"x mandatory"},children:e.jsx("div",{className:"flex gap-4 md:gap-6 pb-4",children:s.map(c=>{const b=a?.find(E=>E.product_ids?.includes(c.id));return e.jsx("div",{className:"flex-none w-[calc(50%-0.5rem)] md:w-[calc(33.333%-1rem)] lg:w-[calc(25%-1.125rem)] min-w-0",style:{scrollSnapAlign:"start"},children:e.jsx(Dt,{product:c,promotion:b})},c.id)})})})]}),e.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `})]})},Ms=()=>{const[t,s]=l.useState([]);return l.useEffect(()=>{(async()=>{const{data:o,error:n}=await k.from("categories").select("*");n&&console.error("Categories error:",n),o&&s(o)})()},[]),e.jsx(e.Fragment,{children:t.length>0&&e.jsx("section",{id:"categories-section",className:"py-12 md:py-20 bg-black",children:e.jsxs("div",{className:"container-custom",children:[e.jsx("h2",{className:"font-display text-2xl md:text-4xl lg:text-5xl font-bold text-white mb-6 md:mb-12",children:"Categorias"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 md:gap-6",children:t.map(a=>e.jsxs("a",{href:`#/products?category=${a.id}`,className:"group relative overflow-hidden aspect-square rounded-xl md:rounded-2xl bg-neutral-900 border border-neutral-800 hover:border-gold transition-all duration-500 md:transform md:hover:-translate-y-2",children:[a.image_url?e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover transition-all duration-500 group-hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-neutral-800 to-neutral-900 flex items-center justify-center",children:e.jsx("span",{className:"text-neutral-700 text-2xl md:text-4xl font-display",children:"?"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent"}),e.jsx("div",{className:"absolute inset-0 flex items-end p-2 md:p-4",children:e.jsx("h3",{className:"font-display text-sm md:text-lg font-bold text-white",children:a.name})})]},a.id))})]})})})},Ra=()=>{const[t,s]=l.useState([]),[a,o]=l.useState(0),[n,x]=l.useState([]),[v,_]=l.useState([]),[y,f]=l.useState([]),[c,b]=l.useState([]),[E,g]=l.useState([]),[u,j]=l.useState("");l.useEffect(()=>{R()},[]),l.useEffect(()=>{if(t.length>1){const N=setInterval(()=>{o(M=>(M+1)%t.length)},6e3);return()=>clearInterval(N)}},[t.length]);const R=async()=>{try{const{data:N,error:M}=await k.from("carousel_images").select("*").eq("is_active",!0).order("order_index");M&&console.error("Carousel error:",M);const{data:T,error:m}=await k.from("products").select("*").eq("is_featured",!0).limit(8);m&&console.error("Featured products error:",m);const{data:d,error:P}=await k.from("products").select("*").order("access_count",{ascending:!1}).limit(8);P&&console.error("Most accessed products error:",P);const{data:W,error:z}=await k.from("promotions").select("*").eq("is_active",!0);if(z&&console.error("Promotions error:",z),N&&s(N),T&&x(T),d&&b(d),W){f(W);const I=W.flatMap(F=>F.product_ids);if(I.length>0){const{data:F,error:q}=await k.from("products").select("*").in("id",I);q&&console.error("Promotional products error:",q),F&&_(F)}}const{data:p,error:i}=await k.from("categories").select("id, name").limit(1);if(i&&console.error("Categories error:",i),p&&p.length>0){const I=p[0],{data:F,error:q}=await k.from("products").select("*").eq("category_id",I.id).limit(8);q&&console.error("Category products error:",q),F&&(g(F),j(I.name))}}catch(N){console.error("Error loading data:",N)}},D=()=>{o(N=>(N+1)%t.length)},w=()=>{o(N=>(N-1+t.length)%t.length)},S=t[a];return e.jsxs("div",{className:"min-h-screen bg-black",children:[t.length>0&&e.jsxs("section",{className:"relative h-screen overflow-hidden",children:[t.map((N,M)=>e.jsxs("div",{className:`absolute inset-0 transition-opacity duration-1000 ${M===a?"opacity-100":"opacity-0"}`,children:[e.jsx("img",{src:N.image_url,alt:N.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/20 to-black"})]},N.id)),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-4 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"font-display text-4xl md:text-6xl lg:text-8xl xl:text-9xl font-bold text-white mb-4 md:mb-6 tracking-tight animate-fade-in",translate:"no",children:S?.title||"Lovely Sex Day"}),e.jsx("p",{className:"text-base md:text-xl lg:text-2xl text-neutral-200 mb-6 md:mb-8 font-light tracking-wide animate-slide-up",children:"Descubra sua sensualidade"}),e.jsxs("a",{href:S?.button_link||"#/products",className:"group relative inline-block px-8 py-3 md:px-12 md:py-5 text-white text-sm md:text-base font-medium tracking-wider overflow-hidden transition-all duration-700 animate-scale-in rounded-full shadow-2xl hover:shadow-wine/50 transform hover:scale-110",style:{background:"linear-gradient(135deg, hsl(var(--color-wine)) 0%, hsl(var(--color-wine-dark)) 100%)"},children:[e.jsx("span",{className:"relative z-10",children:"EXPLORAR"}),e.jsx("div",{className:"absolute inset-0 transform -translate-x-full group-hover:translate-x-0 transition-transform duration-700 rounded-full",style:{background:"linear-gradient(135deg, hsl(var(--color-gold)) 0%, hsl(var(--color-magenta)) 100%)"}})]})]})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:w,className:"hidden md:block absolute left-4 md:left-8 top-1/2 -translate-y-1/2 p-2 md:p-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl md:rounded-2xl hover:bg-white/20 transition-all duration-500 transform hover:scale-110 hover:shadow-lg hover:shadow-white/20","aria-label":"Previous slide",children:e.jsx(Tt,{className:"w-4 h-4 md:w-6 md:h-6 text-white"})}),e.jsx("button",{onClick:D,className:"hidden md:block absolute right-4 md:right-8 top-1/2 -translate-y-1/2 p-2 md:p-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl md:rounded-2xl hover:bg-white/20 transition-all duration-500 transform hover:scale-110 hover:shadow-lg hover:shadow-white/20","aria-label":"Next slide",children:e.jsx(ks,{className:"w-4 h-4 md:w-6 md:h-6 text-white"})}),e.jsx("div",{className:"absolute bottom-6 md:bottom-12 left-1/2 -translate-x-1/2 flex gap-2 md:gap-3",children:t.map((N,M)=>e.jsx("button",{onClick:()=>o(M),className:`h-1 rounded-full transition-all duration-500 ${M===a?"bg-gold w-12 md:w-16":"bg-white/40 w-6 md:w-8 hover:bg-white/60"}`,"aria-label":`Go to slide ${M+1}`},M))})]})]}),e.jsx(Ms,{}),e.jsxs("section",{className:"py-12 md:py-24 bg-black relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 md:w-96 md:h-96 bg-magenta rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 md:w-96 md:h-96 bg-wine rounded-full blur-3xl"})]}),e.jsx("div",{className:"container-custom relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-8 md:mb-16",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 mb-4 md:mb-6",children:[e.jsx(Ne,{className:"w-5 h-5 md:w-8 md:h-8 text-gold"}),e.jsx("h2",{className:"font-display text-2xl md:text-5xl lg:text-6xl font-bold text-white",children:"Sensações Exclusivas"}),e.jsx(Ne,{className:"w-5 h-5 md:w-8 md:h-8 text-gold"})]}),e.jsxs("p",{className:"text-sm md:text-lg text-neutral-300 leading-relaxed font-light px-4",children:[e.jsx("span",{translate:"no",children:"Na Lovely Sex Day"}),", acreditamos que a sensualidade é uma forma de arte. Cada produto é cuidadosamente selecionado para proporcionar experiências únicas e memoráveis. Explore nosso universo de luxo e sofisticação."]})]})})]}),e.jsx(Ge,{title:"Produtos em Destaque",products:n,promotions:y}),e.jsx(Ge,{title:"Mais Desejados",products:c,promotions:y}),E.length>0&&e.jsx(Ge,{title:u,products:E,promotions:y}),v.length>0&&e.jsx(Ge,{title:"Promoções Especiais",products:v,promotions:y})]})},Ma=()=>{const{slug:t}=aa(),s=vs(),[a,o]=l.useState(null),[n,x]=l.useState(null),[v,_]=l.useState(!1),[y,f]=l.useState(!0);l.useEffect(()=>{t&&c()},[t]);const c=async()=>{f(!0);const D=parseInt(t||"0"),{data:w}=await k.from("products").select("*").eq("id",D).maybeSingle();if(w){o(w),await k.from("products").update({access_count:(w.access_count||0)+1}).eq("id",w.id);const{data:S}=await k.from("promotions").select("*").eq("is_active",!0);if(S){const T=S.find(m=>m.product_ids.includes(w.id));T&&x(T)}const N=he(),{data:M}=await k.from("favorites").select("id").eq("session_id",N).eq("product_id",w.id).maybeSingle();_(!!M)}f(!1)},b=async()=>{if(!a)return;const D=he();try{v?(await k.from("favorites").delete().eq("session_id",D).eq("product_id",a.id),_(!1)):(await k.from("favorites").insert({session_id:D,product_id:a.id}),_(!0))}catch(w){console.error("Error toggling favorite:",w)}},E=()=>{if(a){const D=n&&n.is_active;It(a,D?n:void 0)}},g=async()=>{const D=window.location.href;if(navigator.share)try{await navigator.share({title:a?.name,text:a?.description,url:D})}catch(w){console.log("Error sharing:",w)}else navigator.clipboard.writeText(D),alert("Link copiado para a área de transferência!")};if(y)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gold border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-400",children:"Carregando..."})]})});if(!a)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-6",children:"Produto não encontrado"}),e.jsx("button",{onClick:()=>s("/"),className:"px-8 py-3 bg-wine text-white font-medium tracking-wider hover:bg-wine-light transition-all duration-300",children:"VOLTAR À HOME"})]})});const u=n&&n.is_active,j=u?a.price*(1-n.discount_percentage/100):a.price,R=u&&n.discount_percentage;return e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsx("button",{onClick:()=>s("/"),className:"fixed top-24 left-8 z-20 p-4 bg-black-light border border-neutral-800 hover:border-gold text-white transition-all duration-300 group",children:e.jsx(Tt,{className:"w-6 h-6 group-hover:-translate-x-1 transition-transform duration-300"})}),e.jsx("div",{className:"container-custom py-16",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"sticky top-32",children:[e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden bg-neutral-900 border border-neutral-800",children:[a.image_url?e.jsx("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ke,{className:"w-32 h-32 text-neutral-700"})}),a.is_featured&&e.jsx("div",{className:"absolute top-6 right-6 px-4 py-2 bg-gold text-black text-sm font-semibold tracking-wider",children:"DESTAQUE"}),R&&e.jsxs("div",{className:"absolute top-6 left-6 px-4 py-2 bg-magenta text-white text-sm font-semibold tracking-wider",children:["-",R,"%"]})]}),e.jsxs("div",{className:"flex gap-4 mt-8",children:[e.jsxs("button",{onClick:b,className:"flex-1 py-4 bg-black-light border border-neutral-800 hover:border-magenta text-white transition-all duration-300 flex items-center justify-center gap-2",children:[e.jsx(Pt,{className:`w-6 h-6 transition-all ${v?"fill-magenta text-magenta":""}`}),v?"FAVORITADO":"FAVORITAR"]}),e.jsx("button",{onClick:g,className:"p-4 bg-black-light border border-neutral-800 hover:border-gold text-white transition-all duration-300",children:e.jsx(Sa,{className:"w-6 h-6"})})]})]})}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight",children:a.name}),e.jsxs("div",{className:"flex items-baseline gap-4 mb-8",children:[u&&e.jsxs("span",{className:"text-2xl text-neutral-500 line-through font-light",children:["R$ ",a.price.toFixed(2)]}),e.jsxs("span",{className:"text-5xl font-display font-bold text-gold",children:["R$ ",j.toFixed(2)]})]}),a.stock_quantity>0?e.jsxs("div",{className:"flex items-center gap-2 text-green-400 mb-8",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm tracking-wider",children:"EM ESTOQUE"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-neutral-500 mb-8",children:[e.jsx("div",{className:"w-2 h-2 bg-neutral-500 rounded-full"}),e.jsx("span",{className:"text-sm tracking-wider",children:"ESGOTADO"})]})]}),a.description&&e.jsxs("div",{className:"border-t border-neutral-800 pt-8",children:[e.jsxs("h3",{className:"font-display text-2xl font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-6 bg-gold"}),"Descrição"]}),e.jsx("p",{className:"text-neutral-300 leading-relaxed text-lg font-light whitespace-pre-line",children:a.description})]}),a.detailed_description&&e.jsxs("div",{className:"border-t border-neutral-800 pt-8",children:[e.jsxs("h3",{className:"font-display text-2xl font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-6 bg-gold"}),"Detalhes"]}),e.jsx("p",{className:"text-neutral-300 leading-relaxed text-lg font-light whitespace-pre-line",children:a.detailed_description})]}),a.technical_specs&&e.jsxs("div",{className:"bg-black-light border border-neutral-800 p-8",children:[e.jsxs("h3",{className:"font-display text-2xl font-semibold text-white mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-1 h-6 bg-gold"}),"Especificações Técnicas"]}),e.jsx("div",{className:"text-neutral-300 leading-relaxed text-lg font-light whitespace-pre-line",children:a.technical_specs})]}),e.jsx("div",{className:"border-t border-neutral-800 pt-8",children:e.jsxs("button",{onClick:E,disabled:a.stock_quantity<=0,className:"w-full py-5 bg-wine text-white font-semibold text-lg tracking-wider hover:bg-wine-light transition-all duration-300 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed group",children:[e.jsx(st,{className:"w-6 h-6 group-hover:scale-110 transition-transform duration-300"}),a.stock_quantity>0?"ADICIONAR AO CARRINHO":"PRODUTO INDISPONÍVEL"]})}),e.jsx("div",{className:"bg-wine/10 border border-wine/30 p-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Ne,{className:"w-6 h-6 text-gold flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-display text-xl font-semibold text-white mb-2",children:"Entrega Discreta"}),e.jsx("p",{className:"text-neutral-300 leading-relaxed font-light",children:"Todos os produtos são enviados em embalagens discretas, sem qualquer identificação externa do conteúdo. Sua privacidade é nossa prioridade."})]})]})})]})]})})]})};function La(){return new URLSearchParams(ra().search)}const Oa=()=>{const t=La(),[s,a]=l.useState([]),[o,n]=l.useState([]),[x,v]=l.useState([]),[_,y]=l.useState(t.get("search")||""),[f,c]=l.useState(t.get("category")||"all"),[b,E]=l.useState("all"),[g,u]=l.useState(!1),[j,R]=l.useState("newest"),[D,w]=l.useState(!1);l.useEffect(()=>{S()},[]),l.useEffect(()=>{const m=t.get("search");m&&y(m);const d=t.get("category");c(d||"all")},[t]),l.useEffect(()=>{N()},[s,_,f,b,g,j]);const S=async()=>{const{data:m}=await k.from("products").select("*").order("created_at",{ascending:!1}),{data:d}=await k.from("promotions").select("*").eq("is_active",!0);m&&a(m),d&&v(d)},N=()=>{let m=[...s];if(_&&(m=m.filter(d=>d.name.toLowerCase().includes(_.toLowerCase())||d.description.toLowerCase().includes(_.toLowerCase()))),f!=="all"){const d=parseInt(f,10);m=m.filter(P=>P.category_id===d)}switch(b!=="all"&&(m=m.filter(d=>{switch(b){case"under50":return d.price<50;case"50to100":return d.price>=50&&d.price<100;case"100to200":return d.price>=100&&d.price<200;case"over200":return d.price>=200;default:return!0}})),g&&(m=m.filter(d=>d.stock_quantity>0)),j){case"name":m.sort((d,P)=>d.name.localeCompare(P.name));break;case"price-asc":m.sort((d,P)=>d.price-P.price);break;case"price-desc":m.sort((d,P)=>P.price-d.price);break;case"newest":m.sort((d,P)=>new Date(P.created_at).getTime()-new Date(d.created_at).getTime());break}n(m)},M=()=>{y(""),c("all"),E("all"),u(!1),R("newest")},T=m=>x.find(d=>d.product_ids.includes(m));return e.jsxs("div",{className:"min-h-screen bg-black pt-24",children:[e.jsx(Ms,{}),e.jsxs("div",{className:"container-custom py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"font-display text-4xl md:text-6xl font-bold text-white mb-4",children:"Todos os Produtos"}),e.jsxs("p",{className:"text-neutral-400",children:[o.length," ",o.length===1?"produto encontrado":"produtos encontrados"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:`${D?"block":"hidden"} lg:block lg:w-80 space-y-6`,children:e.jsxs("div",{className:"bg-neutral-900 border border-neutral-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"font-display text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"Filtros"]}),e.jsx("button",{onClick:M,className:"text-sm text-gold hover:text-gold-light transition-colors",children:"Limpar"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-300 mb-3",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-500"}),e.jsx("input",{type:"text",value:_,onChange:m=>y(m.target.value),placeholder:"Nome do produto...",className:"w-full pl-10 pr-4 py-3 bg-black border border-neutral-800 rounded-lg text-white placeholder-neutral-500 focus:outline-none focus:border-gold transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-300 mb-3",children:"Faixa de Preço"}),e.jsxs("select",{value:b,onChange:m=>E(m.target.value),className:"w-full px-4 py-3 bg-black border border-neutral-800 rounded-lg text-white focus:outline-none focus:border-gold transition-colors",children:[e.jsx("option",{value:"all",children:"Todos os Preços"}),e.jsx("option",{value:"under50",children:"Até R$ 50"}),e.jsx("option",{value:"50to100",children:"R$ 50 - R$ 100"}),e.jsx("option",{value:"100to200",children:"R$ 100 - R$ 200"}),e.jsx("option",{value:"over200",children:"Acima de R$ 200"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:m=>u(m.target.checked),className:"w-5 h-5 rounded bg-black border-neutral-800 text-gold focus:ring-gold focus:ring-offset-0"}),e.jsx("span",{className:"text-sm text-neutral-300",children:"Apenas em Estoque"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-neutral-300 mb-3",children:"Ordenar Por"}),e.jsxs("select",{value:j,onChange:m=>R(m.target.value),className:"w-full px-4 py-3 bg-black border border-neutral-800 rounded-lg text-white focus:outline-none focus:border-gold transition-colors",children:[e.jsx("option",{value:"newest",children:"Mais Recentes"}),e.jsx("option",{value:"name",children:"Nome (A-Z)"}),e.jsx("option",{value:"price-asc",children:"Menor Preço"}),e.jsx("option",{value:"price-desc",children:"Maior Preço"})]})]})]})]})}),e.jsxs("main",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>w(!D),className:"lg:hidden w-full mb-6 py-3 px-6 bg-neutral-900 border border-neutral-800 rounded-lg text-white font-medium flex items-center justify-center gap-2 hover:border-gold transition-colors",children:[e.jsx(ns,{className:"w-5 h-5"}),D?"Esconder Filtros":"Mostrar Filtros"]}),o.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-20 h-20 bg-neutral-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Qe,{className:"w-10 h-10 text-neutral-600"})}),e.jsx("h3",{className:"font-display text-2xl font-bold text-white mb-2",children:"Nenhum produto encontrado"}),e.jsx("p",{className:"text-neutral-400 mb-6",children:"Tente ajustar os filtros para encontrar o que procura"}),e.jsx("button",{onClick:M,className:"px-6 py-3 bg-wine text-white font-semibold rounded-lg hover:bg-wine-light transition-colors",children:"Limpar Filtros"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:o.map(m=>e.jsx(Dt,{product:m,promotion:T(m.id)},m.id))})]})]})]})]})},Fa=()=>{const[t,s]=l.useState([]),[a,o]=l.useState([]),[n,x]=l.useState(!0);l.useEffect(()=>{v()},[]);const v=async()=>{x(!0);const{data:y}=await k.from("promotions").select("*").eq("is_active",!0).order("discount_percentage",{ascending:!1});if(y&&y.length>0){s(y);const f=y.flatMap(c=>c.product_ids);if(f.length>0){const{data:c}=await k.from("products").select("*").in("id",f);c&&o(c)}}x(!1)},_=y=>new Date(y).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"});return n?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gold border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-400",children:"Carregando promoções..."})]})}):e.jsx("div",{className:"min-h-screen bg-black py-24",children:e.jsxs("div",{className:"container-custom",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-3 mb-6",children:[e.jsx(Ne,{className:"w-10 h-10 text-gold"}),e.jsx("h1",{className:"font-display text-4xl md:text-6xl font-bold text-white",children:"Promoções Especiais"}),e.jsx(Ne,{className:"w-10 h-10 text-gold"})]}),e.jsx("p",{className:"text-neutral-400 text-lg",children:"Aproveite nossas ofertas exclusivas por tempo limitado"})]}),t.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-20 h-20 bg-neutral-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ne,{className:"w-10 h-10 text-neutral-600"})}),e.jsx("h3",{className:"font-display text-2xl font-bold text-white mb-2",children:"Nenhuma promoção ativa no momento"}),e.jsx("p",{className:"text-neutral-400 mb-6",children:"Fique atento! Em breve teremos ofertas incríveis para você"}),e.jsx("a",{href:"#/products",className:"inline-block px-8 py-4 bg-wine text-white font-semibold rounded-lg hover:bg-wine-light transition-colors",children:"Ver Todos os Produtos"})]}):e.jsx("div",{className:"space-y-16",children:t.map(y=>{const f=a.filter(c=>y.product_ids.includes(c.id));return f.length===0?null:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-magenta/20 to-wine/20 border border-magenta/30 rounded-2xl p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl md:text-3xl font-bold text-white mb-2",children:y.name}),e.jsxs("div",{className:"flex items-center gap-2 text-neutral-300",children:[e.jsx(va,{className:"w-5 h-5"}),e.jsxs("span",{children:["Válido até ",y.ends_at?_(y.ends_at):"Disponibilidade"]})]})]}),e.jsx("div",{className:"inline-flex items-center justify-center px-6 py-3 bg-magenta rounded-full",children:e.jsxs("span",{className:"text-3xl md:text-4xl font-display font-bold text-white",children:[y.discount_percentage,"% OFF"]})})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.map(c=>e.jsx(Dt,{product:c,promotion:y},c.id))})]},y.id)})})]})})},Rt=async()=>{const{data:t,error:s}=await k.from("products").select("*");if(s)throw s;return t||[]},ot=async()=>{const{data:t,error:s}=await k.from("categories").select("*");if(s)throw s;return t||[]},za=async()=>{const{data:t,error:s}=await k.from("carousel_images").select("*");if(s)throw s;return t||[]},qa=async()=>{const{data:t,error:s}=await k.from("products").select("*").order("access_count",{ascending:!1});if(s)throw s;return t||[]},Ua=async()=>{const{data:t,error:s}=await k.functions.invoke("get-admin-users");if(s){const a=JSON.parse(s.message);throw new Error(a.error)}return t.users.map(a=>({id:a.id,username:a.user_metadata.username||"",email:a.email||"",created_at:a.created_at}))},$a=async t=>{const{data:s,error:a}=await k.functions.invoke("create-admin-user",{body:{email:t.email,password:t.password,username:t.username}});if(a){const o=JSON.parse(a.message);throw new Error(o.error)}return s},Ha=async(t,s)=>{const{data:a,error:o}=await k.functions.invoke("update-admin-user",{body:{id:t,...s}});if(o){const n=JSON.parse(o.message);throw new Error(n.error)}return a},Wa=async t=>{const{data:s,error:a}=await k.functions.invoke("delete-admin-user",{body:{id:t}});if(a){const o=JSON.parse(a.message);throw new Error(o.error)}return s},Ga=async()=>{const{data:t,error:s}=await k.from("carousel_images").select("*").order("order_index");if(s)throw s;return t||[]},Ba=async t=>{const{data:s,error:a}=await k.from("carousel_images").insert([t]).select();if(a)throw a;return s},ds=async(t,s)=>{const{data:a,error:o}=await k.from("carousel_images").update(s).eq("id",t).select();if(o)throw o;return a},Va=async t=>{const{data:s,error:a}=await k.from("carousel_images").delete().eq("id",t);if(a)throw a;return s},Ya=async t=>{const s=t.map(n=>({id:n.id,order_index:n.order_index})),{data:a,error:o}=await k.from("carousel_images").upsert(s);if(o)throw o;return a},Xa=async t=>{const{data:s,error:a}=await k.from("categories").insert([t]).select();if(a)throw a;return s},Za=async(t,s)=>{const{data:a,error:o}=await k.from("categories").update(s).eq("id",t).select();if(o)throw o;return a},Ja=async t=>{const{data:s,error:a}=await k.from("categories").delete().eq("id",t);if(a)throw a;return s},Ka=async t=>{const{data:s,error:a}=await k.from("products").insert([t]).select();if(a)throw a;return s},Qa=async(t,s)=>{const{data:a,error:o}=await k.from("products").update(s).eq("id",t).select();if(o)throw o;return a},er=async t=>{const{data:s,error:a}=await k.from("products").delete().eq("id",t);if(a)throw a;return s},Ls=async()=>{const{data:t,error:s}=await k.from("promotions").select("*");if(s)throw s;return t||[]},tr=async t=>{const{data:s,error:a}=await k.from("promotions").insert([t]).select();if(a)throw a;return s},sr=async(t,s)=>{const{data:a,error:o}=await k.from("promotions").update(s).eq("id",t).select();if(o)throw o;return a},ar=async t=>{const{data:s,error:a}=await k.from("promotions").delete().eq("id",t);if(a)throw a;return s},rr=async t=>{const{data:s,error:a}=await k.from("promotions").select("is_active").eq("id",t).single();if(a)throw a;const{data:o,error:n}=await k.from("promotions").update({is_active:!s.is_active}).eq("id",t).select();if(n)throw n;return o},or=async()=>{const{data:t,error:s}=await k.from("site_settings").select("*").single();if(s)throw s;return t||{}},nr=async t=>{const{data:s,error:a}=await k.from("site_settings").update(t).eq("id",1).select();if(a)throw a;return s},Se=()=>e.jsx("div",{children:"Loading..."});function lr(t){return`R$ ${t.toFixed(2)}`}const Os=()=>{const[t,s]=l.useState({whatsapp_number:"",site_name:"",logo_url:""}),[a,o]=l.useState(!0),[n,x]=l.useState(!1),[v,_]=l.useState(""),[y,f]=l.useState(null),c=()=>{s(u=>({...u,logo_url:""}))};l.useEffect(()=>{b()},[]);const b=async()=>{o(!0);try{const u=await or();u&&s({whatsapp_number:u.whatsapp_number||"",site_name:u.site_name||"",logo_url:u.logo_url||""})}catch(u){console.error("Erro ao carregar configurações:",u)}finally{o(!1)}},E=async()=>{x(!0),_("");try{let u=t.logo_url;y&&(u=await tt(y,"site"));const j={...t,logo_url:u};await nr(j),s(j),f(null),_("Configurações salvas com sucesso!"),setTimeout(()=>_(""),3e3)}catch(u){console.error("Erro ao salvar configurações:",u),_("Erro ao salvar configurações")}finally{x(!1)}},g=u=>{const j=u.target.value.replace(/\D/g,"");s(R=>({...R,whatsapp_number:j}))};return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Se,{})}):e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ts,{className:"text-red-600 mr-3",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Configurações do Site"})]}),v&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${v.includes("sucesso")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:v}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Site"}),e.jsx("input",{type:"text",value:t.site_name,onChange:u=>s(j=>({...j,site_name:u.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"Nome do site"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(As,{className:"inline mr-2",size:16}),"Número do WhatsApp"]}),e.jsx("input",{type:"text",value:t.whatsapp_number,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"+55 (11) 99999-9999"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Digite apenas números. Exemplo: 5511999999999"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(at,{className:"inline mr-2",size:16}),"Imagem da Navbar"]}),e.jsxs("div",{className:"mt-2 flex items-center",children:[t.logo_url&&e.jsxs("div",{className:"relative mr-4",children:[e.jsx("img",{src:t.logo_url,alt:"Navbar Logo",className:"h-12"}),e.jsx("button",{type:"button",onClick:c,className:"absolute -top-2 -right-2 bg-white border border-gray-300 rounded-full p-1 hover:bg-red-100",title:"Remover imagem",children:e.jsx(ne,{size:16,className:"text-red-600"})})]}),e.jsx("input",{type:"file",onChange:u=>f(u.target.files?u.target.files[0]:null),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:E,disabled:n,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-6 rounded-lg transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-2",size:16}),"Salvar Configurações"]})})})]})]})})},Fs=()=>{const[t,s]=l.useState([]),[a,o]=l.useState([]),[n,x]=l.useState(!1),[v,_]=l.useState(null),[y,f]=l.useState(!0),[c,b]=l.useState(!1),[E,g]=l.useState(""),[u,j]=l.useState([]),[R,D]=l.useState([]),[w,S]=l.useState({name:"",price:"",description:"",detailed_description:"",technical_specs:"",category_id:"",stock_quantity:"",is_featured:!1,is_on_promotion:!1,promotion_discount:""});l.useEffect(()=>{N()},[]);const N=async()=>{f(!0);try{const[p,i]=await Promise.all([Rt(),ot()]);s(p),o(i)}catch(p){console.error("Erro ao carregar dados:",p),g("Erro ao carregar dados")}finally{f(!1)}},M=()=>{S({name:"",price:"",description:"",detailed_description:"",technical_specs:"",category_id:"",stock_quantity:"",is_featured:!1,is_on_promotion:!1,promotion_discount:""}),_(null),j([]),D([])},T=p=>{p?(_(p),S({name:p.name,price:p.price.toString(),description:p.description||"",detailed_description:p.detailed_description||"",technical_specs:p.technical_specs||"",category_id:p.category_id?.toString()||"",stock_quantity:p.stock_quantity.toString(),is_featured:p.is_featured,is_on_promotion:p.is_on_promotion,promotion_discount:p.promotion_discount?.toString()||""}),D(p.images&&p.images.length>0?p.images:p.image_url?[p.image_url]:[])):M(),x(!0)},m=()=>{x(!1),M(),g("")},d=p=>{const i=Array.from(p.target.files||[]);i.length>0&&(j(I=>[...I,...i]),i.forEach(I=>{const F=new FileReader;F.onload=q=>{const te=q.target?.result;D(se=>[...se,te])},F.readAsDataURL(I)}))},P=p=>{D(i=>i.filter((I,F)=>F!==p)),j(i=>i.filter((I,F)=>F!==p))},W=async p=>{p.preventDefault(),b(!0),g("");try{const i=[...R];for(const q of u)if(q instanceof File){const te=await tt(q,"products");u.indexOf(q)!==-1&&(i[i.findIndex(me=>me.startsWith("data:"))]=te)}const I=i.filter(q=>!q.startsWith("data:")),F={...w,images:I,price:parseFloat(w.price),category_id:parseInt(w.category_id),stock_quantity:parseInt(w.stock_quantity),promotion_discount:parseFloat(w.promotion_discount)||0};v?(await Qa(v.id,F),g("Produto atualizado com sucesso!")):(await Ka(F),g("Produto criado com sucesso!")),await N(),m(),setTimeout(()=>g(""),3e3)}catch(i){console.error("Erro ao salvar produto:",i),g("Erro ao salvar produto")}finally{b(!1)}},z=async p=>{if(window.confirm("Tem certeza que deseja excluir este produto?"))try{if(p.images&&p.images.length>0)for(const i of p.images)await Je(i);else p.image_url&&await Je(p.image_url);await er(p.id),await N(),g("Produto excluído com sucesso!"),setTimeout(()=>g(""),3e3)}catch(i){console.error("Erro ao excluir produto:",i),g("Erro ao excluir produto")}};return y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Se,{})}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:"text-red-600 mr-3",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gerenciar Produtos"})]}),e.jsxs("button",{onClick:()=>T(),className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center",children:[e.jsx(_e,{className:"mr-2",size:16}),"Novo Produto"]})]}),E&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${E.includes("sucesso")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:E}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Preço"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estoque"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(p=>{const i=a.find(I=>I.id===p.category_id);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:p.image_url||"",alt:p.name,className:"w-12 h-12 object-cover rounded-lg mr-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[p.description?.substring(0,50),"..."]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i?.name||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:lr(p.price)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.stock_quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[p.is_featured&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Destaque"}),p.is_on_promotion&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Promoção"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(p),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Me,{size:16})}),e.jsx("button",{onClick:()=>z(p),className:"text-red-600 hover:text-red-900",children:e.jsx(ge,{size:16})})]})})]},p.id)})})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:v?"Editar Produto":"Novo Produto"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ne,{size:24})})]}),e.jsxs("form",{onSubmit:W,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Produto *"}),e.jsx("input",{type:"text",required:!0,value:w.name,onChange:p=>S(i=>({...i,name:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preço *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:w.price,onChange:p=>S(i=>({...i,price:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria *"}),e.jsxs("select",{required:!0,value:w.category_id,onChange:p=>S(i=>({...i,category_id:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",children:[e.jsx("option",{value:"",children:"Selecione uma categoria"}),a.map(p=>e.jsx("option",{value:p.id,children:p.name},p.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estoque *"}),e.jsx("input",{type:"number",required:!0,value:w.stock_quantity,onChange:p=>S(i=>({...i,stock_quantity:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição *"}),e.jsx("textarea",{required:!0,rows:3,value:w.description||"",onChange:p=>S(i=>({...i,description:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição Detalhada"}),e.jsx("textarea",{rows:4,value:w.detailed_description||"",onChange:p=>S(i=>({...i,detailed_description:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especificações Técnicas"}),e.jsx("textarea",{rows:3,value:w.technical_specs||"",onChange:p=>S(i=>({...i,technical_specs:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagens do Produto (Múltiplas)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:d,className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors flex items-center cursor-pointer",children:[e.jsx(at,{className:"mr-2",size:16}),"Adicionar Imagens"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[R.length," imagem(ns) selecionada(s)"]})]}),R.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-4",children:R.map((p,i)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:p,alt:`Preview ${i+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>P(i),className:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ne,{size:16})}),i===0&&e.jsx("span",{className:"absolute bottom-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded",children:"Principal"})]},i))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_featured",checked:w.is_featured,onChange:p=>S(i=>({...i,is_featured:p.target.checked})),className:"mr-2"}),e.jsx("label",{htmlFor:"is_featured",className:"text-sm font-medium text-gray-700",children:"Produto em Destaque"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_on_promotion",checked:w.is_on_promotion,onChange:p=>S(i=>({...i,is_on_promotion:p.target.checked})),className:"mr-2"}),e.jsx("label",{htmlFor:"is_on_promotion",className:"text-sm font-medium text-gray-700",children:"Em Promoção"})]})]}),w.is_on_promotion&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Desconto (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:w.promotion_discount||"",onChange:p=>S(i=>({...i,promotion_discount:p.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-6 rounded-lg transition-colors flex items-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-2",size:16}),v?"Atualizar":"Criar"," Produto"]})})]})]})]})})]})},zs=()=>{const[t,s]=l.useState([]),[a,o]=l.useState(!1),[n,x]=l.useState(null),[v,_]=l.useState(!0),[y,f]=l.useState(!1),[c,b]=l.useState(""),[E,g]=l.useState(null),[u,j]=l.useState({name:"",description:"",image_url:""});l.useEffect(()=>{R()},[]);const R=async()=>{_(!0);try{const m=await ot();s(m)}catch(m){console.error("Erro ao carregar categorias:",m),b("Erro ao carregar categorias")}finally{_(!1)}},D=()=>{j({name:"",description:"",image_url:""}),x(null),g(null)},w=m=>{m?(x(m),j({name:m.name,description:m.description||"",image_url:m.image_url||""})):D(),o(!0)},S=()=>{o(!1),D(),b("")},N=m=>{const d=m.target.files?.[0];if(d){g(d);const P=new FileReader;P.onload=W=>{const z=W.target?.result;j(p=>({...p,image_url:z}))},P.readAsDataURL(d)}},M=async m=>{m.preventDefault(),f(!0),b("");try{let d=u.image_url;E&&(d=await tt(E,"categories"));const P={...u,image_url:d};n?(await Za(n.id,P),b("Categoria atualizada com sucesso!")):(await Xa(P),b("Categoria criada com sucesso!")),await R(),S(),setTimeout(()=>b(""),3e3)}catch(d){console.error("Erro ao salvar categoria:",d),b("Erro ao salvar categoria")}finally{f(!1)}},T=async m=>{if(window.confirm("Tem certeza que deseja excluir esta categoria?"))try{m.image_url&&await Je(m.image_url),await Ja(m.id),await R(),b("Categoria excluída com sucesso!"),setTimeout(()=>b(""),3e3)}catch(d){console.error("Erro ao excluir categoria:",d),b("Erro ao excluir categoria")}};return v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Se,{})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(kt,{className:"text-red-600 mr-3",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gerenciar Categorias"})]}),e.jsxs("button",{onClick:()=>w(),className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center",children:[e.jsx(_e,{className:"mr-2",size:16}),"Nova Categoria"]})]}),c&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("sucesso")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:c}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(m=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("img",{src:m.image_url||"",alt:m.name,className:"w-full h-32 object-cover rounded-lg mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:m.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:m.description}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>w(m),className:"text-blue-600 hover:text-blue-900 p-2",children:e.jsx(Me,{size:16})}),e.jsx("button",{onClick:()=>T(m),className:"text-red-600 hover:text-red-900 p-2",children:e.jsx(ge,{size:16})})]})]},m.id))})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n?"Editar Categoria":"Nova Categoria"}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ne,{size:24})})]}),e.jsxs("form",{onSubmit:M,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Categoria *"}),e.jsx("input",{type:"text",required:!0,value:u.name,onChange:m=>j(d=>({...d,name:m.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"Ex: Lingeries, Perfumes, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição *"}),e.jsx("textarea",{required:!0,rows:3,value:u.description||"",onChange:m=>j(d=>({...d,description:m.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"Descreva a categoria..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem da Categoria"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden",id:"category-image-upload"}),e.jsxs("label",{htmlFor:"category-image-upload",className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors flex items-center cursor-pointer",children:[e.jsx(at,{className:"mr-2",size:16}),"Escolher Imagem"]}),u.image_url&&e.jsx("img",{src:u.image_url,alt:"Preview",className:"w-16 h-16 object-cover rounded-lg"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:S,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:y,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-6 rounded-lg transition-colors flex items-center",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-2",size:16}),n?"Atualizar":"Criar"," Categoria"]})})]})]})]})})]})},qs=()=>{const[t,s]=l.useState([]),[a,o]=l.useState([]),[n,x]=l.useState([]),[v,_]=l.useState(!1),[y,f]=l.useState(null),[c,b]=l.useState(!0),[E,g]=l.useState(!1),[u,j]=l.useState(""),[R,D]=l.useState(null),[w,S]=l.useState({title:"",image_url:"",button_link:"",is_active:!0});l.useEffect(()=>{N()},[]);const N=async()=>{b(!0);try{const[i,I,F]=await Promise.all([Ga(),ot(),Ls()]);s(i),o(I),x(F)}catch(i){console.error("Erro ao carregar dados iniciais:",i),j("Erro ao carregar dados")}finally{b(!1)}},M=()=>{S({title:"",image_url:"",button_link:"",is_active:!0}),f(null),D(null)},T=i=>{i?(f(i),S({title:i.title||"",image_url:i.image_url,button_link:i.button_link||"",is_active:i.is_active})):M(),_(!0)},m=()=>{_(!1),M(),j("")},d=i=>{const I=i.target.files?.[0];if(I){D(I);const F=new FileReader;F.onload=q=>{const te=q.target?.result;S(se=>({...se,image_url:te}))},F.readAsDataURL(I)}},P=async i=>{i.preventDefault(),g(!0),j("");try{let I=w.image_url;R&&(I=await tt(R,"carousel"));const F={...w,image_url:I};if(y)await ds(y.id,F),j("Imagem atualizada com sucesso!");else{const q={...F,order_index:t.length+1};await Ba(q),j("Imagem adicionada com sucesso!")}await N(),m(),setTimeout(()=>j(""),3e3)}catch(I){console.error("Erro ao salvar imagem:",I),j("Erro ao salvar imagem")}finally{g(!1)}},W=async i=>{if(window.confirm("Tem certeza que deseja excluir esta imagem?"))try{await Je(i.image_url),await Va(i.id),await N(),j("Imagem excluída com sucesso!"),setTimeout(()=>j(""),3e3)}catch(I){console.error("Erro ao excluir imagem:",I),j("Erro ao excluir imagem")}},z=async(i,I)=>{const F=t.findIndex(se=>se.id===i);if(F===-1)return;const q=[...t],te=I==="up"?F-1:F+1;if(te>=0&&te<q.length){[q[F],q[te]]=[q[te],q[F]];const se=q.map((me,Oe)=>({...me,order_index:Oe+1}));try{await Ya(se),s(se),j("Ordem das imagens atualizada!"),setTimeout(()=>j(""),3e3)}catch(me){console.error("Erro ao atualizar ordem:",me),j("Erro ao atualizar ordem das imagens")}}},p=async i=>{try{const I={...i,is_active:!i.is_active};await ds(i.id,I),await N(),j("Status da imagem atualizado!"),setTimeout(()=>j(""),3e3)}catch(I){console.error("Erro ao atualizar status:",I),j("Erro ao atualizar status da imagem")}};return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Se,{})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_t,{className:"text-red-600 mr-3",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gerenciar Carrossel"})]}),e.jsxs("button",{onClick:()=>T(),className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center",children:[e.jsx(_e,{className:"mr-2",size:16}),"Nova Imagem"]})]}),u&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${u.includes("sucesso")||u.includes("atualizada")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:u}),e.jsx("div",{className:"space-y-4",children:t.map((i,I)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center space-x-4",children:[e.jsx("img",{src:i.image_url,alt:i.title||"",className:"w-24 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:i.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Posição: ",i.order_index]}),e.jsxs("p",{className:"text-sm text-gray-600 truncate",children:["Link: ",i.button_link||"N/A"]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.is_active?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>z(i.id,"up"),disabled:I===0,className:"text-gray-600 hover:text-gray-900 disabled:text-gray-300 p-1",children:e.jsx(ba,{size:16})}),e.jsx("button",{onClick:()=>z(i.id,"down"),disabled:I===t.length-1,className:"text-gray-600 hover:text-gray-900 disabled:text-gray-300 p-1",children:e.jsx(fa,{size:16})}),e.jsx("button",{onClick:()=>p(i),className:`px-3 py-1 rounded text-xs font-medium ${i.is_active?"bg-red-100 text-red-800 hover:bg-red-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:i.is_active?"Desativar":"Ativar"}),e.jsx("button",{onClick:()=>T(i),className:"text-blue-600 hover:text-blue-900 p-1",children:e.jsx(Me,{size:16})}),e.jsx("button",{onClick:()=>W(i),className:"text-red-600 hover:text-red-900 p-1",children:e.jsx(ge,{size:16})})]})]},i.id))})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:y?"Editar Imagem":"Nova Imagem"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ne,{size:24})})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título da Imagem *"}),e.jsx("input",{type:"text",required:!0,value:w.title||"",onChange:i=>S(I=>({...I,title:i.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"Ex: Coleção Verão 2024"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link do Botão (Opcional)"}),e.jsxs("select",{value:w.button_link||"",onChange:i=>S(I=>({...I,button_link:i.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",children:[e.jsx("option",{value:"",children:"Nenhum"}),e.jsxs("optgroup",{label:"Páginas",children:[e.jsx("option",{value:"#/products",children:"Todos os Produtos"}),e.jsx("option",{value:"#/promotions",children:"Página de Promoções"})]}),e.jsx("optgroup",{label:"Categorias",children:a.map(i=>e.jsx("option",{value:`#/products?category=${i.slug}`,children:i.name},i.id))}),e.jsx("optgroup",{label:"Promoções",children:n.map(i=>e.jsx("option",{value:"#/promotions",children:i.name},i.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagem do Carrossel *"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"hidden",id:"carousel-image-upload"}),e.jsxs("label",{htmlFor:"carousel-image-upload",className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors flex items-center cursor-pointer",children:[e.jsx(at,{className:"mr-2",size:16}),"Escolher Imagem"]}),w.image_url&&e.jsx("img",{src:w.image_url,alt:"Preview",className:"w-20 h-12 object-cover rounded-lg"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recomendado: 1200x400px ou superior"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:w.is_active,onChange:i=>S(I=>({...I,is_active:i.target.checked})),className:"mr-2"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"Imagem Ativa"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:E,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-6 rounded-lg transition-colors flex items-center",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-2",size:16}),y?"Atualizar":"Adicionar"," Imagem"]})})]})]})]})})]})},Us=()=>{const[t,s]=l.useState([]),[a,o]=l.useState([]),[n,x]=l.useState(!1),[v,_]=l.useState(null),[y,f]=l.useState(!0),[c,b]=l.useState(!1),[E,g]=l.useState(""),[u,j]=l.useState({name:"",discount_percentage:"",product_ids:[],is_active:!0});l.useEffect(()=>{R()},[]);const R=async()=>{f(!0);try{const[d,P]=await Promise.all([Rt(),Ls()]);o(d),s(P)}catch(d){console.error("Erro ao carregar dados:",d),g("Erro ao carregar dados")}finally{f(!1)}},D=()=>{j({name:"",discount_percentage:"",product_ids:[],is_active:!0}),_(null)},w=d=>{d?(_(d),j({name:d.name,discount_percentage:d.discount_percentage.toString(),product_ids:d.product_ids,is_active:d.is_active})):D(),x(!0)},S=()=>{x(!1),D(),g("")},N=d=>{j(P=>({...P,product_ids:P.product_ids.includes(d)?P.product_ids.filter(W=>W!==d):[...P.product_ids,d]}))},M=async d=>{d.preventDefault(),b(!0),g("");try{const P={...u,discount_percentage:parseFloat(u.discount_percentage)};v?(await sr(v.id,P),g("Promoção atualizada com sucesso!")):(await tr(P),g("Promoção criada com sucesso!")),await R(),S(),setTimeout(()=>g(""),3e3)}catch(P){console.error("Erro ao salvar promoção:",P),g("Erro ao salvar promoção")}finally{b(!1)}},T=async d=>{if(window.confirm("Tem certeza que deseja excluir esta promoção?"))try{await ar(d),await R(),g("Promoção excluída com sucesso!"),setTimeout(()=>g(""),3e3)}catch(P){console.error("Erro ao excluir promoção:",P),g("Erro ao excluir promoção")}},m=async d=>{try{await rr(d),await R(),g("Status da promoção atualizado!"),setTimeout(()=>g(""),3e3)}catch(P){console.error("Erro ao atualizar status da promoção:",P),g("Erro ao atualizar status da promoção")}};return y?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Se,{})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"text-red-600 mr-3",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gerenciar Promoções"})]}),e.jsxs("button",{onClick:()=>w(),className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center",children:[e.jsx(_e,{className:"mr-2",size:16}),"Nova Promoção"]})]}),E&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${E.includes("sucesso")||E.includes("atualizado")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:E}),e.jsx("div",{className:"space-y-4",children:t.map(d=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:d.name}),e.jsxs("p",{className:"text-gray-600",children:["Desconto: ",d.discount_percentage,"%"]}),e.jsxs("p",{className:"text-gray-600",children:["Produtos: ",d.product_ids.length]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${d.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.is_active?"Ativa":"Inativa"}),e.jsx("button",{onClick:()=>m(d.id),className:`px-3 py-1 rounded text-sm font-medium ${d.is_active?"bg-red-100 text-red-800 hover:bg-red-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:d.is_active?"Desativar":"Ativar"}),e.jsx("button",{onClick:()=>w(d),className:"text-blue-600 hover:text-blue-900 p-2",children:e.jsx(Me,{size:16})}),e.jsx("button",{onClick:()=>T(d.id),className:"text-red-600 hover:text-red-900 p-2",children:e.jsx(ge,{size:16})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.product_ids.map(P=>{const W=a.find(z=>z.id===P);return W?e.jsxs("div",{className:"bg-white p-3 rounded-lg flex items-center space-x-3",children:[e.jsx("img",{src:W.image_url||"",alt:W.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:W.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["R$ ",W.price.toFixed(2)]})]})]},P):null})})]},d.id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:v?"Editar Promoção":"Nova Promoção"}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ne,{size:24})})]}),e.jsxs("form",{onSubmit:M,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Promoção *"}),e.jsx("input",{type:"text",required:!0,value:u.name,onChange:d=>j(P=>({...P,name:d.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"Ex: Promoção de Verão"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Desconto (%) *"}),e.jsx("input",{type:"number",min:"1",max:"100",required:!0,value:u.discount_percentage,onChange:d=>j(P=>({...P,discount_percentage:d.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"20"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:u.is_active,onChange:d=>j(P=>({...P,is_active:d.target.checked})),className:"mr-2"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"Promoção Ativa"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Selecionar Produtos (",u.product_ids.length," selecionados)"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto border border-gray-200 rounded-lg p-4",children:a.map(d=>e.jsx("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-colors ${u.product_ids.includes(d.id)?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>N(d.id),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:u.product_ids.includes(d.id),onChange:()=>N(d.id),className:"text-red-600"}),e.jsx("img",{src:d.image_url||"",alt:d.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:d.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:["R$ ",d.price.toFixed(2)]})]})]})},d.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:S,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c||u.product_ids.length===0,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-6 rounded-lg transition-colors flex items-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-2",size:16}),v?"Atualizar":"Criar"," Promoção"]})})]})]})]})})]})},$s=()=>{const[t,s]=l.useState([]),[a,o]=l.useState(!1),[n,x]=l.useState(null),[v,_]=l.useState(!0),[y,f]=l.useState(!1),[c,b]=l.useState(""),[E,g]=l.useState(!1),[u,j]=l.useState({username:"",email:"",password:"",confirmPassword:""});l.useEffect(()=>{R()},[]);const R=async()=>{_(!0);try{const T=await Ua();s(T)}catch(T){console.error("Erro ao carregar administradores:",T),b("Erro ao carregar administradores. Verifique se o client supabase tem a service_role_key.")}finally{_(!1)}},D=()=>{j({username:"",email:"",password:"",confirmPassword:""}),x(null),g(!1)},w=T=>{T?(x(T),j({username:T.username,email:T.email,password:"",confirmPassword:""})):D(),o(!0)},S=()=>{o(!1),D(),b("")},N=async T=>{if(T.preventDefault(),f(!0),b(""),u.password!==u.confirmPassword){b("As senhas não coincidem"),f(!1);return}if(!n&&u.password.length<6){b("A senha deve ter pelo menos 6 caracteres"),f(!1);return}try{const m={username:u.username,email:u.email,password:u.password};n?(await Ha(n.id,m),b("Administrador atualizado com sucesso!")):(await $a(m),b("Administrador criado com sucesso!")),await R(),S(),setTimeout(()=>b(""),3e3)}catch(m){console.error("Erro ao salvar administrador:",m),b("Erro ao salvar administrador")}finally{f(!1)}},M=async T=>{if(t.length<=1){b("Não é possível excluir o último administrador"),setTimeout(()=>b(""),3e3);return}if(window.confirm("Tem certeza que deseja excluir este administrador?"))try{await Wa(T),await R(),b("Administrador excluído com sucesso!"),setTimeout(()=>b(""),3e3)}catch(m){console.error("Erro ao excluir administrador:",m),b("Erro ao excluir administrador")}};return v?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Se,{})}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{className:"text-red-600 mr-3",size:24}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gerenciar Administradores"})]}),e.jsxs("button",{onClick:()=>w(),className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center",children:[e.jsx(_e,{className:"mr-2",size:16}),"Novo Administrador"]})]}),c&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("sucesso")?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:c}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuário"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(T=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.username})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:T.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:new Date(T.created_at).toLocaleDateString("pt-BR")})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(T),className:"text-blue-600 hover:text-blue-900",children:e.jsx(Me,{size:16})}),e.jsx("button",{onClick:()=>M(T.id),className:"text-red-600 hover:text-red-900",disabled:t.length<=1,children:e.jsx(ge,{size:16})})]})})]},T.id))})]})})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n?"Editar Administrador":"Novo Administrador"}),e.jsx("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ne,{size:24})})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome de Usuário *"}),e.jsx("input",{type:"text",required:!0,value:u.username,onChange:T=>j(m=>({...m,username:T.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"admin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:u.email,onChange:T=>j(m=>({...m,email:T.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"admin@lovelysexday.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n?"Nova Senha (deixe em branco para manter)":"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:E?"text":"password",required:!n,value:u.password,onChange:T=>j(m=>({...m,password:T.target.value})),className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Mínimo 6 caracteres"}),e.jsx("button",{type:"button",onClick:()=>g(!E),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:E?e.jsx(Ss,{className:"h-5 w-5 text-gray-400"}):e.jsx(Es,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha *"}),e.jsx("input",{type:E?"text":"password",required:!n||u.password!=="",value:u.confirmPassword,onChange:T=>j(m=>({...m,confirmPassword:T.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-black",placeholder:"Confirme a senha"})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[e.jsx("button",{type:"button",onClick:S,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:y,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white font-semibold py-2 px-6 rounded-lg transition-colors flex items-center",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-2",size:16}),n?"Atualizar":"Criar"," Administrador"]})})]})]})]})})]})},ir=({onLogout:t,onNavigate:s})=>{const[a,o]=l.useState("dashboard"),[n,x]=l.useState({totalProducts:0,totalCategories:0,totalCarouselImages:0,featuredProducts:0}),[v,_]=l.useState([]);l.useEffect(()=>{y()},[]);const y=async()=>{try{const[g,u,j,R]=await Promise.all([Rt(),ot(),za(),qa()]);x({totalProducts:g.length,totalCategories:u.length,totalCarouselImages:j.length,featuredProducts:g.filter(D=>D.is_featured).length}),_(R.slice(0,5))}catch(g){console.error("Error loading dashboard data:",g)}},f=({icon:g,title:u,value:j,color:R})=>e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-lg ${R}`,children:e.jsx(g,{className:"text-white",size:24})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-black",children:u}),e.jsx("p",{className:"text-2xl font-bold text-black",children:j})]})]})}),c=[{name:"Produtos",icon:Ke,color:"bg-blue-600 hover:bg-blue-700",section:"products"},{name:"Categorias",icon:kt,color:"bg-green-600 hover:bg-green-700",section:"categories"},{name:"Carrossel",icon:_t,color:"bg-purple-600 hover:bg-purple-700",section:"carousel"},{name:"Promoções",icon:Ye,color:"bg-orange-600 hover:bg-orange-700",section:"promotions"},{name:"Administradores",icon:Ps,color:"bg-red-600 hover:bg-red-700",section:"administrators"},{name:"Configurações",icon:As,color:"bg-gray-600 hover:bg-gray-700",section:"settings"}],b=g=>{o(g),s(g)},E=()=>{switch(a){case"products":return e.jsx(Fs,{});case"categories":return e.jsx(zs,{});case"carousel":return e.jsx(qs,{});case"promotions":return e.jsx(Us,{});case"administrators":return e.jsx($s,{});case"settings":return e.jsx(Os,{});default:return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-black mb-4 flex items-center",children:[e.jsx(ya,{className:"mr-2 text-black",size:20}),"Ações Rápidas"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.map(g=>e.jsxs("button",{onClick:()=>b(g.section),className:`${g.color} text-white p-4 rounded-lg transition-colors flex flex-col items-center space-y-2`,children:[e.jsx(g.icon,{size:24}),e.jsx("span",{className:"font-semibold",children:g.name})]},g.section))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-black mb-4 flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-black",size:20}),"Produtos Mais Acessados"]}),e.jsx("div",{className:"space-y-3",children:v.map((g,u)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:u+1}),e.jsx("img",{src:g.image_url,alt:g.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-black truncate",children:g.name}),e.jsxs("p",{className:"text-sm text-black",children:[g.access_count," acessos"]})]})]},g.id))})]})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ts,{className:"text-red-600 mr-3",size:24}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-black",children:["Painel Administrativo - ",e.jsx("span",{translate:"no",children:"Lovely Sex Day"})]}),a!=="dashboard"&&e.jsx("button",{onClick:()=>o("dashboard"),className:"text-sm text-red-600 hover:text-red-700",children:"← Voltar ao Dashboard"})]})]}),e.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-red-600 transition-colors",children:[e.jsx(Na,{size:20}),e.jsx("span",{children:"Sair"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a==="dashboard"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-black mb-2",children:"Bem-vindo ao Painel Administrativo"}),e.jsx("p",{className:"text-black",children:"Gerencie produtos, categorias, promoções e mais através desta interface."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(f,{icon:Ke,title:"Total de Produtos",value:n.totalProducts,color:"bg-blue-600"}),e.jsx(f,{icon:kt,title:"Categorias",value:n.totalCategories,color:"bg-green-600"}),e.jsx(f,{icon:_t,title:"Imagens no Carrossel",value:n.totalCarouselImages,color:"bg-purple-600"}),e.jsx(f,{icon:Ye,title:"Produtos em Destaque",value:n.featuredProducts,color:"bg-orange-600"})]})]}),E()]})]})};/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:Hs,setPrototypeOf:ms,isFrozen:cr,getPrototypeOf:dr,getOwnPropertyDescriptor:mr}=Object;let{freeze:K,seal:ae,create:Ws}=Object,{apply:Ct,construct:At}=typeof Reflect<"u"&&Reflect;K||(K=function(s){return s});ae||(ae=function(s){return s});Ct||(Ct=function(s,a){for(var o=arguments.length,n=new Array(o>2?o-2:0),x=2;x<o;x++)n[x-2]=arguments[x];return s.apply(a,n)});At||(At=function(s){for(var a=arguments.length,o=new Array(a>1?a-1:0),n=1;n<a;n++)o[n-1]=arguments[n];return new s(...o)});const Be=Q(Array.prototype.forEach),ur=Q(Array.prototype.lastIndexOf),us=Q(Array.prototype.pop),Te=Q(Array.prototype.push),xr=Q(Array.prototype.splice),Xe=Q(String.prototype.toLowerCase),ft=Q(String.prototype.toString),bt=Q(String.prototype.match),Pe=Q(String.prototype.replace),hr=Q(String.prototype.indexOf),gr=Q(String.prototype.trim),re=Q(Object.prototype.hasOwnProperty),Z=Q(RegExp.prototype.test),Ie=pr(TypeError);function Q(t){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,o=new Array(a>1?a-1:0),n=1;n<a;n++)o[n-1]=arguments[n];return Ct(t,s,o)}}function pr(t){return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return At(t,a)}}function L(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Xe;ms&&ms(t,null);let o=s.length;for(;o--;){let n=s[o];if(typeof n=="string"){const x=a(n);x!==n&&(cr(s)||(s[o]=x),n=x)}t[n]=!0}return t}function fr(t){for(let s=0;s<t.length;s++)re(t,s)||(t[s]=null);return t}function de(t){const s=Ws(null);for(const[a,o]of Hs(t))re(t,a)&&(Array.isArray(o)?s[a]=fr(o):o&&typeof o=="object"&&o.constructor===Object?s[a]=de(o):s[a]=o);return s}function De(t,s){for(;t!==null;){const o=mr(t,s);if(o){if(o.get)return Q(o.get);if(typeof o.value=="function")return Q(o.value)}t=dr(t)}function a(){return null}return a}const xs=K(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yt=K(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vt=K(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),br=K(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jt=K(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yr=K(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hs=K(["#text"]),gs=K(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wt=K(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ps=K(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ve=K(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vr=ae(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jr=ae(/<%[\w\W]*|[\w\W]*%>/gm),wr=ae(/\$\{[\w\W]*/gm),Nr=ae(/^data-[\-\w.\u00B7-\uFFFF]+$/),_r=ae(/^aria-[\-\w]+$/),Gs=ae(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kr=ae(/^(?:\w+script|data):/i),Sr=ae(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Bs=ae(/^html$/i),Er=ae(/^[a-z][.\w]*(-[.\w]+)+$/i);var fs=Object.freeze({__proto__:null,ARIA_ATTR:_r,ATTR_WHITESPACE:Sr,CUSTOM_ELEMENT:Er,DATA_ATTR:Nr,DOCTYPE_NAME:Bs,ERB_EXPR:jr,IS_ALLOWED_URI:Gs,IS_SCRIPT_OR_DATA:kr,MUSTACHE_EXPR:vr,TMPLIT_EXPR:wr});const Re={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Cr=function(){return typeof window>"u"?null:window},Ar=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let o=null;const n="data-tt-policy-suffix";a&&a.hasAttribute(n)&&(o=a.getAttribute(n));const x="dompurify"+(o?"#"+o:"");try{return s.createPolicy(x,{createHTML(v){return v},createScriptURL(v){return v}})}catch{return console.warn("TrustedTypes policy "+x+" could not be created."),null}},bs=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Vs(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cr();const s=A=>Vs(A);if(s.version="3.2.7",s.removed=[],!t||!t.document||t.document.nodeType!==Re.document||!t.Element)return s.isSupported=!1,s;let{document:a}=t;const o=a,n=o.currentScript,{DocumentFragment:x,HTMLTemplateElement:v,Node:_,Element:y,NodeFilter:f,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:b,DOMParser:E,trustedTypes:g}=t,u=y.prototype,j=De(u,"cloneNode"),R=De(u,"remove"),D=De(u,"nextSibling"),w=De(u,"childNodes"),S=De(u,"parentNode");if(typeof v=="function"){const A=a.createElement("template");A.content&&A.content.ownerDocument&&(a=A.content.ownerDocument)}let N,M="";const{implementation:T,createNodeIterator:m,createDocumentFragment:d,getElementsByTagName:P}=a,{importNode:W}=o;let z=bs();s.isSupported=typeof Hs=="function"&&typeof S=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:p,ERB_EXPR:i,TMPLIT_EXPR:I,DATA_ATTR:F,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:se,CUSTOM_ELEMENT:me}=fs;let{IS_ALLOWED_URI:Oe}=fs,G=null;const Mt=L({},[...xs,...yt,...vt,...jt,...hs]);let V=null;const Lt=L({},[...gs,...wt,...ps,...Ve]);let $=Object.seal(Ws(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,nt=null,Ot=!0,lt=!0,Ft=!1,zt=!0,pe=!1,Fe=!0,ue=!1,it=!1,ct=!1,fe=!1,ze=!1,qe=!1,qt=!0,Ut=!1;const Ys="user-content-";let dt=!0,Ce=!1,be={},ye=null;const $t=L({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ht=null;const Wt=L({},["audio","video","img","source","image","track"]);let mt=null;const Gt=L({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ue="http://www.w3.org/1998/Math/MathML",$e="http://www.w3.org/2000/svg",le="http://www.w3.org/1999/xhtml";let ve=le,ut=!1,xt=null;const Xs=L({},[Ue,$e,le],ft);let He=L({},["mi","mo","mn","ms","mtext"]),We=L({},["annotation-xml"]);const Zs=L({},["title","style","font","a","script"]);let Ae=null;const Js=["application/xhtml+xml","text/html"],Ks="text/html";let B=null,je=null;const Qs=a.createElement("form"),Bt=function(r){return r instanceof RegExp||r instanceof Function},ht=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(je&&je===r)){if((!r||typeof r!="object")&&(r={}),r=de(r),Ae=Js.indexOf(r.PARSER_MEDIA_TYPE)===-1?Ks:r.PARSER_MEDIA_TYPE,B=Ae==="application/xhtml+xml"?ft:Xe,G=re(r,"ALLOWED_TAGS")?L({},r.ALLOWED_TAGS,B):Mt,V=re(r,"ALLOWED_ATTR")?L({},r.ALLOWED_ATTR,B):Lt,xt=re(r,"ALLOWED_NAMESPACES")?L({},r.ALLOWED_NAMESPACES,ft):Xs,mt=re(r,"ADD_URI_SAFE_ATTR")?L(de(Gt),r.ADD_URI_SAFE_ATTR,B):Gt,Ht=re(r,"ADD_DATA_URI_TAGS")?L(de(Wt),r.ADD_DATA_URI_TAGS,B):Wt,ye=re(r,"FORBID_CONTENTS")?L({},r.FORBID_CONTENTS,B):$t,Ee=re(r,"FORBID_TAGS")?L({},r.FORBID_TAGS,B):de({}),nt=re(r,"FORBID_ATTR")?L({},r.FORBID_ATTR,B):de({}),be=re(r,"USE_PROFILES")?r.USE_PROFILES:!1,Ot=r.ALLOW_ARIA_ATTR!==!1,lt=r.ALLOW_DATA_ATTR!==!1,Ft=r.ALLOW_UNKNOWN_PROTOCOLS||!1,zt=r.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pe=r.SAFE_FOR_TEMPLATES||!1,Fe=r.SAFE_FOR_XML!==!1,ue=r.WHOLE_DOCUMENT||!1,fe=r.RETURN_DOM||!1,ze=r.RETURN_DOM_FRAGMENT||!1,qe=r.RETURN_TRUSTED_TYPE||!1,ct=r.FORCE_BODY||!1,qt=r.SANITIZE_DOM!==!1,Ut=r.SANITIZE_NAMED_PROPS||!1,dt=r.KEEP_CONTENT!==!1,Ce=r.IN_PLACE||!1,Oe=r.ALLOWED_URI_REGEXP||Gs,ve=r.NAMESPACE||le,He=r.MATHML_TEXT_INTEGRATION_POINTS||He,We=r.HTML_INTEGRATION_POINTS||We,$=r.CUSTOM_ELEMENT_HANDLING||{},r.CUSTOM_ELEMENT_HANDLING&&Bt(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&Bt(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pe&&(lt=!1),ze&&(fe=!0),be&&(G=L({},hs),V=[],be.html===!0&&(L(G,xs),L(V,gs)),be.svg===!0&&(L(G,yt),L(V,wt),L(V,Ve)),be.svgFilters===!0&&(L(G,vt),L(V,wt),L(V,Ve)),be.mathMl===!0&&(L(G,jt),L(V,ps),L(V,Ve))),r.ADD_TAGS&&(G===Mt&&(G=de(G)),L(G,r.ADD_TAGS,B)),r.ADD_ATTR&&(V===Lt&&(V=de(V)),L(V,r.ADD_ATTR,B)),r.ADD_URI_SAFE_ATTR&&L(mt,r.ADD_URI_SAFE_ATTR,B),r.FORBID_CONTENTS&&(ye===$t&&(ye=de(ye)),L(ye,r.FORBID_CONTENTS,B)),dt&&(G["#text"]=!0),ue&&L(G,["html","head","body"]),G.table&&(L(G,["tbody"]),delete Ee.tbody),r.TRUSTED_TYPES_POLICY){if(typeof r.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ie('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof r.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ie('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=r.TRUSTED_TYPES_POLICY,M=N.createHTML("")}else N===void 0&&(N=Ar(g,n)),N!==null&&typeof M=="string"&&(M=N.createHTML(""));K&&K(r),je=r}},Vt=L({},[...yt,...vt,...br]),Yt=L({},[...jt,...yr]),ea=function(r){let h=S(r);(!h||!h.tagName)&&(h={namespaceURI:ve,tagName:"template"});const C=Xe(r.tagName),U=Xe(h.tagName);return xt[r.namespaceURI]?r.namespaceURI===$e?h.namespaceURI===le?C==="svg":h.namespaceURI===Ue?C==="svg"&&(U==="annotation-xml"||He[U]):!!Vt[C]:r.namespaceURI===Ue?h.namespaceURI===le?C==="math":h.namespaceURI===$e?C==="math"&&We[U]:!!Yt[C]:r.namespaceURI===le?h.namespaceURI===$e&&!We[U]||h.namespaceURI===Ue&&!He[U]?!1:!Yt[C]&&(Zs[C]||!Vt[C]):!!(Ae==="application/xhtml+xml"&&xt[r.namespaceURI]):!1},oe=function(r){Te(s.removed,{element:r});try{S(r).removeChild(r)}catch{R(r)}},xe=function(r,h){try{Te(s.removed,{attribute:h.getAttributeNode(r),from:h})}catch{Te(s.removed,{attribute:null,from:h})}if(h.removeAttribute(r),r==="is")if(fe||ze)try{oe(h)}catch{}else try{h.setAttribute(r,"")}catch{}},Xt=function(r){let h=null,C=null;if(ct)r="<remove></remove>"+r;else{const H=bt(r,/^[\r\n\t ]+/);C=H&&H[0]}Ae==="application/xhtml+xml"&&ve===le&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");const U=N?N.createHTML(r):r;if(ve===le)try{h=new E().parseFromString(U,Ae)}catch{}if(!h||!h.documentElement){h=T.createDocument(ve,"template",null);try{h.documentElement.innerHTML=ut?M:U}catch{}}const X=h.body||h.documentElement;return r&&C&&X.insertBefore(a.createTextNode(C),X.childNodes[0]||null),ve===le?P.call(h,ue?"html":"body")[0]:ue?h.documentElement:X},Zt=function(r){return m.call(r.ownerDocument||r,r,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},gt=function(r){return r instanceof b&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof c)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function"||typeof r.hasChildNodes!="function")},Jt=function(r){return typeof _=="function"&&r instanceof _};function ie(A,r,h){Be(A,C=>{C.call(s,r,h,je)})}const Kt=function(r){let h=null;if(ie(z.beforeSanitizeElements,r,null),gt(r))return oe(r),!0;const C=B(r.nodeName);if(ie(z.uponSanitizeElement,r,{tagName:C,allowedTags:G}),Fe&&r.hasChildNodes()&&!Jt(r.firstElementChild)&&Z(/<[/\w!]/g,r.innerHTML)&&Z(/<[/\w!]/g,r.textContent)||r.nodeType===Re.progressingInstruction||Fe&&r.nodeType===Re.comment&&Z(/<[/\w]/g,r.data))return oe(r),!0;if(!G[C]||Ee[C]){if(!Ee[C]&&es(C)&&($.tagNameCheck instanceof RegExp&&Z($.tagNameCheck,C)||$.tagNameCheck instanceof Function&&$.tagNameCheck(C)))return!1;if(dt&&!ye[C]){const U=S(r)||r.parentNode,X=w(r)||r.childNodes;if(X&&U){const H=X.length;for(let ee=H-1;ee>=0;--ee){const ce=j(X[ee],!0);ce.__removalCount=(r.__removalCount||0)+1,U.insertBefore(ce,D(r))}}}return oe(r),!0}return r instanceof y&&!ea(r)||(C==="noscript"||C==="noembed"||C==="noframes")&&Z(/<\/no(script|embed|frames)/i,r.innerHTML)?(oe(r),!0):(pe&&r.nodeType===Re.text&&(h=r.textContent,Be([p,i,I],U=>{h=Pe(h,U," ")}),r.textContent!==h&&(Te(s.removed,{element:r.cloneNode()}),r.textContent=h)),ie(z.afterSanitizeElements,r,null),!1)},Qt=function(r,h,C){if(qt&&(h==="id"||h==="name")&&(C in a||C in Qs))return!1;if(!(lt&&!nt[h]&&Z(F,h))){if(!(Ot&&Z(q,h))){if(!V[h]||nt[h]){if(!(es(r)&&($.tagNameCheck instanceof RegExp&&Z($.tagNameCheck,r)||$.tagNameCheck instanceof Function&&$.tagNameCheck(r))&&($.attributeNameCheck instanceof RegExp&&Z($.attributeNameCheck,h)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(h,r))||h==="is"&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&Z($.tagNameCheck,C)||$.tagNameCheck instanceof Function&&$.tagNameCheck(C))))return!1}else if(!mt[h]){if(!Z(Oe,Pe(C,se,""))){if(!((h==="src"||h==="xlink:href"||h==="href")&&r!=="script"&&hr(C,"data:")===0&&Ht[r])){if(!(Ft&&!Z(te,Pe(C,se,"")))){if(C)return!1}}}}}}return!0},es=function(r){return r!=="annotation-xml"&&bt(r,me)},ts=function(r){ie(z.beforeSanitizeAttributes,r,null);const{attributes:h}=r;if(!h||gt(r))return;const C={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:V,forceKeepAttr:void 0};let U=h.length;for(;U--;){const X=h[U],{name:H,namespaceURI:ee,value:ce}=X,we=B(H),pt=ce;let Y=H==="value"?pt:gr(pt);if(C.attrName=we,C.attrValue=Y,C.keepAttr=!0,C.forceKeepAttr=void 0,ie(z.uponSanitizeAttribute,r,C),Y=C.attrValue,Ut&&(we==="id"||we==="name")&&(xe(H,r),Y=Ys+Y),Fe&&Z(/((--!?|])>)|<\/(style|title|textarea)/i,Y)){xe(H,r);continue}if(we==="attributename"&&bt(Y,"href")){xe(H,r);continue}if(C.forceKeepAttr)continue;if(!C.keepAttr){xe(H,r);continue}if(!zt&&Z(/\/>/i,Y)){xe(H,r);continue}pe&&Be([p,i,I],as=>{Y=Pe(Y,as," ")});const ss=B(r.nodeName);if(!Qt(ss,we,Y)){xe(H,r);continue}if(N&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!ee)switch(g.getAttributeType(ss,we)){case"TrustedHTML":{Y=N.createHTML(Y);break}case"TrustedScriptURL":{Y=N.createScriptURL(Y);break}}if(Y!==pt)try{ee?r.setAttributeNS(ee,H,Y):r.setAttribute(H,Y),gt(r)?oe(r):us(s.removed)}catch{xe(H,r)}}ie(z.afterSanitizeAttributes,r,null)},ta=function A(r){let h=null;const C=Zt(r);for(ie(z.beforeSanitizeShadowDOM,r,null);h=C.nextNode();)ie(z.uponSanitizeShadowNode,h,null),Kt(h),ts(h),h.content instanceof x&&A(h.content);ie(z.afterSanitizeShadowDOM,r,null)};return s.sanitize=function(A){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=null,C=null,U=null,X=null;if(ut=!A,ut&&(A="<!-->"),typeof A!="string"&&!Jt(A))if(typeof A.toString=="function"){if(A=A.toString(),typeof A!="string")throw Ie("dirty is not a string, aborting")}else throw Ie("toString is not a function");if(!s.isSupported)return A;if(it||ht(r),s.removed=[],typeof A=="string"&&(Ce=!1),Ce){if(A.nodeName){const ce=B(A.nodeName);if(!G[ce]||Ee[ce])throw Ie("root node is forbidden and cannot be sanitized in-place")}}else if(A instanceof _)h=Xt("<!---->"),C=h.ownerDocument.importNode(A,!0),C.nodeType===Re.element&&C.nodeName==="BODY"||C.nodeName==="HTML"?h=C:h.appendChild(C);else{if(!fe&&!pe&&!ue&&A.indexOf("<")===-1)return N&&qe?N.createHTML(A):A;if(h=Xt(A),!h)return fe?null:qe?M:""}h&&ct&&oe(h.firstChild);const H=Zt(Ce?A:h);for(;U=H.nextNode();)Kt(U),ts(U),U.content instanceof x&&ta(U.content);if(Ce)return A;if(fe){if(ze)for(X=d.call(h.ownerDocument);h.firstChild;)X.appendChild(h.firstChild);else X=h;return(V.shadowroot||V.shadowrootmode)&&(X=W.call(o,X,!0)),X}let ee=ue?h.outerHTML:h.innerHTML;return ue&&G["!doctype"]&&h.ownerDocument&&h.ownerDocument.doctype&&h.ownerDocument.doctype.name&&Z(Bs,h.ownerDocument.doctype.name)&&(ee="<!DOCTYPE "+h.ownerDocument.doctype.name+`>
`+ee),pe&&Be([p,i,I],ce=>{ee=Pe(ee,ce," ")}),N&&qe?N.createHTML(ee):ee},s.setConfig=function(){let A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ht(A),it=!0},s.clearConfig=function(){je=null,it=!1},s.isValidAttribute=function(A,r,h){je||ht({});const C=B(A),U=B(r);return Qt(C,U,h)},s.addHook=function(A,r){typeof r=="function"&&Te(z[A],r)},s.removeHook=function(A,r){if(r!==void 0){const h=ur(z[A],r);return h===-1?void 0:xr(z[A],h,1)[0]}return us(z[A])},s.removeHooks=function(A){z[A]=[]},s.removeAllHooks=function(){z=bs()},s}Vs();const Tr=()=>{const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")},Pr=t=>{sessionStorage.setItem("csrf_token",t)},Ir=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&t.length<=254;class Dr{requests=new Map;check(s,a=5,o=6e4){const n=Date.now(),v=(this.requests.get(s)||[]).filter(_=>n-_<o);return v.length>=a?!1:(v.push(n),this.requests.set(s,v),!0)}clear(s){this.requests.delete(s)}}const ys=new Dr,Rr=({onLogin:t})=>{const[s,a]=l.useState(""),[o,n]=l.useState(""),[x,v]=l.useState(!1),[_,y]=l.useState(""),[f,c]=l.useState(!1);l.useEffect(()=>{const E=Tr();Pr(E)},[]);const b=async E=>{if(E.preventDefault(),y(""),c(!0),!s.trim()||!o.trim()){y("Por favor, preencha todos os campos"),c(!1);return}if(!Ir(s)){y("Por favor, insira um email válido"),c(!1);return}if(!ys.check(s,5,6e4)){y("Muitas tentativas de login. Tente novamente em 1 minuto."),c(!1);return}try{const{error:g}=await k.auth.signInWithPassword({email:s,password:o});if(g)throw g;ys.clear(s),t()}catch(g){y(g.message||"Credenciais inválidas")}finally{c(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-600 via-purple-700 to-red-600 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-bold text-white mb-2 font-serif",translate:"no",children:"Lovely Sex Day"}),e.jsx("p",{className:"text-white/80 text-lg",children:"Painel Administrativo"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-red-100 rounded-full p-4 w-16 h-16 mx-auto mb-4",children:e.jsx(ls,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Acesso Restrito"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Faça login para acessar o painel"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[_&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:_}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ea,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:s,onChange:E=>a(E.target.value),className:"appearance-none rounded-lg relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ls,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:x?"text":"password",required:!0,value:o,onChange:E=>n(E.target.value),className:"appearance-none rounded-lg relative block w-full pl-10 pr-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Senha"}),e.jsx("button",{type:"button",onClick:()=>v(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:x?e.jsx(Ss,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Es,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:f,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors disabled:bg-red-400",children:f?"Entrando...":"Entrar no Painel"})})]})]})]})})};function Mr(){const[t,s]=l.useState(null),[a,o]=l.useState(!0);l.useEffect(()=>{(async()=>{const{data:{session:_}}=await k.auth.getSession();s(_),o(!1)})();const{data:v}=k.auth.onAuthStateChange((_,y)=>{s(y)});return()=>{v?.subscription.unsubscribe()}},[]);const n=async()=>{await k.auth.signOut()};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-passion border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-600",children:"Carregando..."})]})}):t?e.jsxs(Nt,{children:[e.jsx(J,{path:"",element:e.jsx(ir,{onLogout:n,onNavigate:()=>{}})}),e.jsx(J,{path:"managers",element:e.jsx($s,{})}),e.jsx(J,{path:"carousel",element:e.jsx(qs,{})}),e.jsx(J,{path:"categories",element:e.jsx(zs,{})}),e.jsx(J,{path:"products",element:e.jsx(Fs,{})}),e.jsx(J,{path:"promotions",element:e.jsx(Us,{})}),e.jsx(J,{path:"settings",element:e.jsx(Os,{})}),e.jsx(J,{path:"*",element:e.jsx(js,{to:"/admin",replace:!0})})]}):e.jsx(Rr,{onLogin:()=>{}})}function Lr(){const[t,s]=l.useState(!1),[a,o]=l.useState(!0);l.useEffect(()=>{n();const{data:x}=k.auth.onAuthStateChange((v,_)=>{s(!!_)});return()=>{x?.subscription.unsubscribe()}},[]);const n=async()=>{const{data:{session:x}}=await k.auth.getSession();s(!!x),o(!1)};return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-passion border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-600",children:"Carregando..."})]})}):e.jsx(oa,{children:e.jsxs(Nt,{children:[e.jsx(J,{path:"/admin/*",element:e.jsx(Mr,{})}),e.jsx(J,{path:"/*",element:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Ia,{}),e.jsx("main",{className:"flex-1",children:e.jsxs(Nt,{children:[e.jsx(J,{path:"/",element:e.jsx(Ra,{})}),e.jsx(J,{path:"/product/:slug",element:e.jsx(Ma,{})}),e.jsx(J,{path:"/products",element:e.jsx(Oa,{})}),e.jsx(J,{path:"/promotions",element:e.jsx(Fa,{})}),e.jsx(J,{path:"*",element:e.jsx(js,{to:"/",replace:!0})})]})}),e.jsx(Da,{})]})})]})})}_s(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Lr,{})}));
